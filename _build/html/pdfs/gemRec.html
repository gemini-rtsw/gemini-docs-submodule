

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Created:June 25, 1996 Modified:February 3, 1997 &mdash; Gemini Documentation 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Gemini Documentation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Community Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://epics-controls.org">EPICS Website</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.epics-controls.org">EPICS Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Quick Start Guide:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quick-start/quick-start.html">Quick Start Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">PDFs:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pdfs-index.html">PDF Tests</a></li>
</ul>
<p class="caption"><span class="caption-text">Wiki Docs:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../wiki/wiki-index.html">Wiki Tests</a></li>
</ul>
<p class="caption"><span class="caption-text">Other Docs:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../other/other-index.html">Other Tests</a></li>
</ul>
<p class="caption"><span class="caption-text">Code:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../code/code-index.html">Code Tests</a></li>
</ul>
<p class="caption"><span class="caption-text">Gemini HowTo's:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../howtos/RTEMSInstall.html">Installing RTEMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/EPICSInstall.html">Installing EPICS Base on the ADE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/ADEInstall.html">Installing ADE Build Tools</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Gemini Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Created:June 25, 1996 Modified:February 3, 1997</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/pdfs/gemRec.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="created-june-25-1996-modified-february-3-1997">
<h1>Created:June 25, 1996 Modified:February 3, 1997<a class="headerlink" href="#created-june-25-1996-modified-february-3-1997" title="Permalink to this headline">¶</a></h1>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><p class="first"><strong>Gemini</strong></p>
<p><strong>Controls</strong></p>
<p><strong>Group</strong></p>
<p class="last"><strong>Report</strong></p>
</td>
</tr>
</tbody>
</table>
<blockquote>
<div>Gemini Record Reference Manual</div></blockquote>
</div>
<div class="section" id="bret-goodrich-and-andy-foster">
<h1>Bret Goodrich and Andy Foster<a class="headerlink" href="#bret-goodrich-and-andy-foster" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><blockquote>
<div><p>SPE-C-G0070/02</p>
<p><strong>This document decribes the EPICS records created by the Gemini
Project.</strong></p>
</div></blockquote>
<p>1.0 Introduction…………………………………………………………………………3</p>
</div></blockquote>
<hr class="docutils" />
<p>1.1 Purpose
………………………………………………………………………………………………..3</p>
<p>1.2
Scope……………………………………………………………………………………………………3</p>
<blockquote>
<div><blockquote>
<div>1.3
References…………………………………………………………………………………………….3
1.4
Revisions………………………………………………………………………………………………3</div></blockquote>
<p>2.0 apply - Apply Record……………………………………………………………4</p>
</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>2.1 Field
Summary………………………………………………………………………………………4
2.2 Field
Descriptions………………………………………………………………………………….5</div></blockquote>
<p>2.3 Record Support
Routines………………………………………………………………………..5</p>
<p>2.4 Record Processing
…………………………………………………………………………………6</p>
<blockquote>
<div><blockquote>
<div>2.5 Device Support
……………………………………………………………………………………..6
2.6 CapFast
………………………………………………………………………………………………..6</div></blockquote>
<p>3.0 CAD - Command Action Directive Record ……………………………7</p>
</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>3.1 Field
Summary………………………………………………………………………………………8
3.2 Field
Descriptions………………………………………………………………………………….9</div></blockquote>
<p>3.3 Record Support
Routines………………………………………………………………………10</p>
<p>3.4 Record Processing
……………………………………………………………………………….11</p>
<blockquote>
<div><blockquote>
<div>3.5 Device Support
……………………………………………………………………………………12
3.6 CapFast
………………………………………………………………………………………………12</div></blockquote>
<p>4.0 CAR - Command Action Response Record………………………….13</p>
</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>4.1 Field
Summary…………………………………………………………………………………….14
4.2 Field
Descriptions………………………………………………………………………………..14</div></blockquote>
<p>4.3 Record Support
Routines………………………………………………………………………15</p>
<p>4.4 Record Processing
……………………………………………………………………………….16</p>
<div class="section" id="gemini-record-reference-manual-spe-c-g0070-02-1-of-49-table-of-contents">
<h2>Gemini Record Reference Manual SPE-C-G0070/02 1 of 49 Table Of Contents<a class="headerlink" href="#gemini-record-reference-manual-spe-c-g0070-02-1-of-49-table-of-contents" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><blockquote>
<div>4.5 Device
Support…………………………………………………………………………………….16
4.6 CapFast
………………………………………………………………………………………………16</div></blockquote>
<p>5.0 SIR - Status Information Record…………………………………………17</p>
</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>5.1 Field
Summary…………………………………………………………………………………….18
5.2 Field
Descriptions………………………………………………………………………………..19</div></blockquote>
<p>5.3 Record Support
Routines………………………………………………………………………20</p>
<p>5.4 Record
Processing………………………………………………………………………………..21</p>
<blockquote>
<div><blockquote>
<div>5.5 Device
Support…………………………………………………………………………………….21
5.6 CapFast
………………………………………………………………………………………………21</div></blockquote>
<p>6.0 lutout - Lookup Table Output Record …………………………………22</p>
</div></blockquote>
<hr class="docutils" />
<p>6.1 Field
Summary…………………………………………………………………………………….23</p>
<p>6.2 Field
Description………………………………………………………………………………….23</p>
<p>6.3 Record Support
Routines………………………………………………………………………25</p>
<p>6.4 Record
Processing………………………………………………………………………………..25</p>
<p>6.5 Device
Support…………………………………………………………………………………….26</p>
<blockquote>
<div><blockquote>
<div>6.6 CapFast
………………………………………………………………………………………………26
6.7 Future
Enhancements……………………………………………………………………………26</div></blockquote>
<p>7.0 lutin - Lookup Table Input Record ……………………………………..27</p>
</div></blockquote>
<hr class="docutils" />
<p>7.1 Field
Summary…………………………………………………………………………………….27</p>
<p>7.2 Field
Description………………………………………………………………………………….28</p>
<p>7.3 Record Support
Routines………………………………………………………………………29</p>
<p>7.4 Record
Processing………………………………………………………………………………..30</p>
<p>7.5 Device
Support…………………………………………………………………………………….30</p>
<blockquote>
<div><blockquote>
<div>7.6 CapFast
………………………………………………………………………………………………30
7.7 Future
Enhancements……………………………………………………………………………31</div></blockquote>
<p>8.0 mosub - Multiple Output Subroutine Record ………………………32</p>
</div></blockquote>
<hr class="docutils" />
<p>8.1
Introduction…………………………………………………………………………………………32</p>
<blockquote>
<div><blockquote>
<div>8.2 Field
Summary…………………………………………………………………………………….33
8.3 Field
Descriptions………………………………………………………………………………..36
8.4 Record Support
Routines………………………………………………………………………37</div></blockquote>
<p>9.0 GenSub - The General Subroutine Record ………………………….39</p>
</div></blockquote>
<hr class="docutils" />
<p>9.1
Introduction…………………………………………………………………………………………39</p>
<blockquote>
<div>9.2 Field
Summary…………………………………………………………………………………….40
9.3 Field
Descriptions………………………………………………………………………………..44</div></blockquote>
<p>9.4 Record Support
Routines………………………………………………………………………45</p>
<blockquote>
<div>9.5 Use of the ‘GenSub’
Record………………………………………………………………….47
9.6 Use of User Defined
Structures………………………………………………………………47</div></blockquote>
<p>9.7 Dynamically Changing the User Routine called during Record
Processing …49</p>
<blockquote>
<div><strong>Introduction</strong></div></blockquote>
</div>
<div class="section" id="introduction">
<h2>1.0 Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>1.1 Purpose</div></blockquote>
<hr class="docutils" />
<blockquote>
<div><blockquote>
<div>This document describes the EPICS records created by the Gemini 8M
Telescopes Project for use in its telescope and instrument control
databases.</div></blockquote>
<p>1.2 Scope</p>
</div></blockquote>
<hr class="docutils" />
<p>This document defines the interface to only those records created by and
for the Gemini Project. For a complete list of the standard EPICS
records, and a description of the field summary tables, refer to the
<em>EPICS Input Output Controller Record Reference Manual</em> [1].</p>
<blockquote>
<div>1.3 References</div></blockquote>
<hr class="docutils" />
<ol class="arabic simple">
<li><em>EPICS Input Output Controller Record Reference Manual</em>, Janet B.
Anderson and Martin R. Kraimer, Argonne National Laboratory, Dec 1,
1994.</li>
<li><em>ICD 1b — The Baseline Attribute/Value Interface</em> (gscg.grp.024/04),
Kim Gillies, Steve Wampler, Bret Goodrich.</li>
<li><em>EPICS Lookup Table Records</em> (gscg.bdg.003.lut/1), Bret Goodrich.</li>
<li><em>The ‘mosub’ EPICS Record Reference Manual</em>, Andy Foster.</li>
<li><em>The ‘genSub’ EPICS Record Reference Manual</em>, Andy Foster.</li>
</ol>
<blockquote>
<div>1.4 Revisions</div></blockquote>
<hr class="docutils" />
<ol class="arabic simple">
<li>Version 01, 8 November, 1996. Document created.</li>
<li>Version 02, February 3, 1997, Updated genSub section.</li>
</ol>
</div>
<div class="section" id="apply-apply-record">
<h2>2.0 apply - Apply Record<a class="headerlink" href="#apply-apply-record" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><blockquote>
<div><p>The apply record executes data links to other records. Its primary
purpose is to process CAD records in a fixed order, and return the
results of processing those records. There may be up to eight sets of
links to other records. The links in each set pass the directive
field (DIR to OUTA through OUTH) and client ID field (CLID to OCLA
through OCLH), and receive the result value (INPA through INPH to
VAL) and error message (INMA through INMH to MESS).</p>
<p>The apply record accepts the same directives as the CAD, namely:
MARK, CLEAR, PRESET, START, and STOP. Writing a value to the
directive field (DIR) starts the processing of the record and
subsequent processing of all attached records. Writing the START
directive forces the PRESET directive to be sent to all links before
the START directive is sent. This insures that all CAD records linked
to the apply record have valid arguments.</p>
<p>Values returned through the INPx links are inspected by the apply
record for non-zero results. If any link returns a non-zero value,
the associated INMx link is read. The error value and error message
are copied to the VAL and MESS fields, monitors are posted, and the
processing halts. No further links are processed once an error has
been returned.</p>
<p>The use of the apply record is required for all principal systems
databases, including the TCS, CICS, and all instruments. There must
be one, and only one, top level apply record in the database,
although there may be cascaded apply records. All principal systems
CAD records must be linked to the apply record and must be processed
through this record. Links from the apply record outputs may go to
records other than CAD records, such as calc, sub, or mosub records.</p>
</div></blockquote>
<p>2.1 Field Summary</p>
</div></blockquote>
<hr class="docutils" />
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Fi
eld</strong></th>
<th class="head"><strong>T
ype</strong></th>
<th class="head">**
DCT**</th>
<th class="head"><ul class="first simple">
<li></li>
</ul>
<p class="last"><em>Init
ial*</em></p>
</th>
<th class="head"><strong>Acc
ess</strong></th>
<th class="head"><strong>Mod
ify</strong></th>
<th class="head"><p class="first"><strong>Rec
P
roc</strong></p>
<ul class="simple">
<li></li>
</ul>
<p class="last"><em>Moni
tor*</em></p>
</th>
<th class="head"><ul class="first simple">
<li></li>
</ul>
<p class="last"><em>PP*</em></p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>VAL</td>
<td>LONG</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>DIR</td>
<td>RECC
HOICE</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>CLID</td>
<td>LONG</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>MESS</td>
<td>S
TRING</td>
<td>No</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-even"><td>OMSS</td>
<td>S
TRING</td>
<td>No</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OUTx</td>
<td>OU
TLINK</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>OCLx</td>
<td>OU
TLINK</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>INPx</td>
<td>I
NLINK</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>INMx</td>
<td>I
NLINK</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
</tbody>
</table>
<blockquote>
<div>2.2 Field Descriptions</div></blockquote>
<hr class="docutils" />
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="30%" />
<col width="55%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Name</strong></th>
<th class="head"><strong>Summary</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>VAL</td>
<td>Value</td>
<td>This is the return value from the
input links. If any link returns a
non-zero, processing stops and the
last value is returned.</td>
</tr>
<tr class="row-odd"><td>DIR</td>
<td>Directive</td>
<td>This value of this field is passed
to all OUTx output links. If the
directive is START, the directive
PRESET is first passed to all
output links.</td>
</tr>
<tr class="row-even"><td>CLID</td>
<td>Client ID</td>
<td>This number is incremented every
time a directive is loaded. The
value is passed to all OCLx output
links.</td>
</tr>
<tr class="row-odd"><td>MESS</td>
<td>Message</td>
<td>This is the return message from an
INMx input link. If the return
value is 0, this field is empty.
Otherwise, it reads the error
message from the INMx link.</td>
</tr>
<tr class="row-even"><td>OMSS</td>
<td>Old Message</td>
<td>This is the old message string.</td>
</tr>
<tr class="row-odd"><td>OUTx</td>
<td><p class="first">Output</p>
<p class="last">directive link</p>
</td>
<td>There are eight output links
OUTA-OUTH which pass the value of
the DIR field to a record field.</td>
</tr>
<tr class="row-even"><td>OCLx</td>
<td><p class="first">Output client</p>
<p class="last">ID link</p>
</td>
<td>There are eight output links
OUMA-OUMH which pass the value of
the CLID field to a record field.</td>
</tr>
<tr class="row-odd"><td>INPx</td>
<td>Input result link</td>
<td>There are eight input links
INPA-INPH which read a value from
a record field. A non-zero value
halts the processing sequence.</td>
</tr>
<tr class="row-even"><td>INMx</td>
<td>Input message link</td>
<td>There are eight input links
INMA-INMH which read a value from
a record field. The link is read
only for the corresponding INPx
link which returned a non-zero
value.</td>
</tr>
</tbody>
</table>
<blockquote>
<div>2.3 Record Support Routines</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>2.3.1 init_record</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>This routine initializes the apply record. All OUTx links are forced
to be process passive; all OUMx, INPx, and INMx links are forced to
be non-process passive.</div></blockquote>
<p><strong>2.3.2 process</strong></p>
<blockquote>
<div>See the next section.</div></blockquote>
<p><strong>2.3.3 get_value</strong></p>
<blockquote>
<div><blockquote>
<div>This routine fills the values of struct valueDes so that they refer
to VAL.</div></blockquote>
<p>2.3.4 get_enum_str</p>
</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>This routine converts the long integer values 0 through 4 into the
strings “MARK”, “CLEAR”, PRESET”, “START”, and “STOP”, respectively.</div></blockquote>
<p><strong>2.3.5 get_enum_strs</strong></p>
<blockquote>
<div>This routine returns all five of the above strings.</div></blockquote>
<p><strong>2.3.6 put_enum_str</strong></p>
<blockquote>
<div><blockquote>
<div>This routine converts the above strings into the long integer values
0 through 4.</div></blockquote>
<p>2.4 Record Processing</p>
</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>This routine processes the record whenever requested. Processing will
occur whenever a value is written to the DIR field.</div></blockquote>
<ul class="simple">
<li>All MARK directives are ignored and processing exits.</li>
<li>The return message field is cleared.</li>
<li>If the directive is START:</li>
</ul>
<blockquote>
<div><p><strong>—</strong>increment the client ID,</p>
<p><strong>—</strong>recursively call this procedure with PRESET, <strong>—</strong>exit if an
error occurred during PRESET.</p>
</div></blockquote>
<ul class="simple">
<li>for each existing set of links A-H:</li>
</ul>
<blockquote>
<div><p><strong>—</strong>send CLID and DIR to OCLx and OUTx links,</p>
<p><strong>—</strong>get VAL from INPx link,</p>
<p><strong>—</strong>if VAL is non-zero, get MESS from OUMx link and stop looping</p>
</div></blockquote>
<ul class="simple">
<li>post monitor on VAL field.</li>
<li>if VAL is non-zero and MESS is different than OMSS:</li>
</ul>
<blockquote>
<div><strong>—</strong>post monitor on MESS field.</div></blockquote>
<p><strong>2.5 Device Support</strong></p>
<blockquote>
<div><blockquote>
<div>There is no device support available.</div></blockquote>
<p>2.6 CapFast</p>
</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>There is one CapFast symbol for the Apply record.</div></blockquote>
<p><strong>FIGURE 1.</strong> CapFast <em>eapply</em> symbol</p>
<blockquote>
<div>.</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="39%" />
<col width="28%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">SLNK</th>
<th class="head"><p class="first">apply</p>
<blockquote class="last">
<div><p>.</p>
<p>.</p>
</div></blockquote>
</th>
<th class="head">FLNK</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>DIR</td>
<td>&#160;</td>
<td>VAL</td>
</tr>
<tr class="row-odd"><td>CLID</td>
<td>&#160;</td>
<td>MESS</td>
</tr>
<tr class="row-even"><td>INPA</td>
<td>&#160;</td>
<td>OUTA</td>
</tr>
<tr class="row-odd"><td>INMA</td>
<td>&#160;</td>
<td>OCLA</td>
</tr>
<tr class="row-even"><td>INPB</td>
<td>&#160;</td>
<td>OUTB</td>
</tr>
<tr class="row-odd"><td>INMB</td>
<td>&#160;</td>
<td>OCLB</td>
</tr>
<tr class="row-even"><td>INPC</td>
<td>&#160;</td>
<td>OUTC</td>
</tr>
<tr class="row-odd"><td>INMC</td>
<td>&#160;</td>
<td>OCLC</td>
</tr>
<tr class="row-even"><td>INPD</td>
<td>&#160;</td>
<td>OUTD</td>
</tr>
<tr class="row-odd"><td>INMD</td>
<td>&#160;</td>
<td>OCLD</td>
</tr>
<tr class="row-even"><td>INPE</td>
<td>&#160;</td>
<td>OUTE</td>
</tr>
<tr class="row-odd"><td>INME</td>
<td>&#160;</td>
<td>OCLE</td>
</tr>
<tr class="row-even"><td>INPF</td>
<td>&#160;</td>
<td>OUTF</td>
</tr>
<tr class="row-odd"><td>INMF</td>
<td>&#160;</td>
<td>OCLF</td>
</tr>
<tr class="row-even"><td>INPG</td>
<td>&#160;</td>
<td>OUTG</td>
</tr>
<tr class="row-odd"><td>INMG</td>
<td>&#160;</td>
<td>OCLG</td>
</tr>
<tr class="row-even"><td>INPH</td>
<td>&#160;</td>
<td>OUTH</td>
</tr>
<tr class="row-odd"><td>INMH</td>
<td>&#160;</td>
<td>OCLH</td>
</tr>
<tr class="row-even"><td></td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>NPPNMSNPPNMS</p>
<p>NPPNMSNPPNMS</p>
<p>NPPNMSNPPNMS NPPNMSNPPNMS</p>
<p>NPPNMSNPPNMS NPPNMSNPPNMS</p>
<p>NPPNMSNPPNMS</p>
<p>NPPNMSNPPNMS NPPNMSNPPNMS NPPNMSNPPNMS NPPNMSNPPNMS NPPNMSNPPNMS</p>
<p>NPPNMSNPPNMS</p>
<p>NPPNMSNPPNMS</p>
<p>NPPNMSNPPNMS</p>
<p>NPPNMSNPPNMS</p>
<p>.</p>
</div></blockquote>
</div>
<div class="section" id="cad-command-action-directive-record">
<h2>3.0 CAD - Command Action Directive Record<a class="headerlink" href="#cad-command-action-directive-record" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The CAD record initiates processing of Gemini commands. Attributes of
the command are either loaded into fields A through T, or read from
input links INPA through INPT. Processing begins when a directive is
received in the DIR field. Subroutine calls may be made during
initialization and processing. Each directive also has an associated
link which is processed when the directive is received. A return
value from the processing subroutine is returned in the VAL field.</p>
<p>There are five valid directives: MARK, CLEAR, PRESET, START, and
STOP. The MARK directive forces the CAD state machine into state 1.
This directive is also executed through special processing if any of
fields A through T are modified. The CLEAR directive forces the state
machine into state 0, clearing any prior mark or preset. The PRESET
directive moves the state machine from state 1 to state 2. The START
directive either moves the state machine from state 2 to state 0, or
executes a PRESET directive then moves from state 2 to state 0. In
all cases except PRESET, START, and STOP in state 0 the processing
subroutine SNAM is called and the corresponding directive link is
processed.</p>
<p>The CAD record can be in one of three states, given by the value of
the MARK field. In state 0, the CAD record is considered to be
cleared. In state 1, it is considered to be marked as ready to
preset. In state 2, it is considered to be preset and ready to
activate. Figure 1 shows the state diagram for the CAD record, with
the edges identified as possible directive commands.</p>
<ol class="arabic simple" start="2">
<li>PRESET call and link processed first.</li>
</ol>
</div></blockquote>
<div class="section" id="field-summary">
<span id="field-summary-1"></span><h3>3.1 Field Summary<a class="headerlink" href="#field-summary" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Fi
eld</strong></th>
<th class="head"><strong>T
ype</strong></th>
<th class="head">**
DCT**</th>
<th class="head"><ul class="first simple">
<li></li>
</ul>
<p class="last"><em>Init
ial*</em></p>
</th>
<th class="head"><strong>Acc
ess</strong></th>
<th class="head"><strong>Mod
ify</strong></th>
<th class="head"><strong>Rec
Proc
Moni
tor</strong></th>
<th class="head"><ul class="first simple">
<li></li>
</ul>
<p class="last"><em>PP*</em></p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>VAL</td>
<td>LONG</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>SNAM</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>SADR</td>
<td>LONG</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>STYP</td>
<td>SHORT</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>INAM</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>DIR</td>
<td>RECC
HOICE</td>
<td>Yes</td>
<td>1</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>ICID</td>
<td>LONG</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>MESS</td>
<td>S
TRING</td>
<td>No</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-even"><td>OMSS</td>
<td>S
TRING</td>
<td>No</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>CTYP</td>
<td>SHORT</td>
<td>Yes</td>
<td>2</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>PREC</td>
<td>SHORT</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>MLNK</td>
<td>FW
DLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>CLNK</td>
<td>FW
DLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>PLNK</td>
<td>FW
DLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>STLK</td>
<td>FW
DLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>SPLK</td>
<td>FW
DLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>OCID</td>
<td>LONG</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OSIM</td>
<td>RECC
HOICE</td>
<td>No</td>
<td>None</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-even"><td>NARG</td>
<td>SHORT</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>MARK</td>
<td>SHORT</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-even"><td>ERSV</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>SIOL</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>SVAL</td>
<td>LONG</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>SIML</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>SIMM</td>
<td>RECC
HOICE</td>
<td>No</td>
<td>None</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>SIMS</td>
<td>GBLC
HOICE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>INPx</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OUTx</td>
<td>OU
TLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>A - T</td>
<td>S
TRING</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Spec</td>
</tr>
<tr class="row-odd"><td>VALx</td>
<td>NOA
CCESS</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>FTVx</td>
<td>GBLC
HOICE</td>
<td>No</td>
<td>S
tring</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
</tbody>
</table>
<blockquote id="field-descriptions-1">
<div>3.2 Field Descriptions</div></blockquote>
<hr class="docutils" />
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="39%" />
<col width="45%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Name</strong></th>
<th class="head"><strong>Summary</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>VAL</td>
<td><p class="first">Return Error</p>
<p class="last">Code</p>
</td>
<td>The return value is set
within the user-supplied
processing subroutine.
Conventionally, a return
value of zero indicates
success, while a non-zero
value shows an error has
occurred.</td>
</tr>
<tr class="row-odd"><td>SNAM</td>
<td><p class="first">Subroutine</p>
<p class="last">Name</p>
</td>
<td>The name of a VxWorks
subroutine to execute
during processing.</td>
</tr>
<tr class="row-even"><td>SADR</td>
<td><p class="first">Subroutine</p>
<p class="last">Address</p>
</td>
<td>The internal
representation of the
subroutine address.</td>
</tr>
<tr class="row-odd"><td>STYP</td>
<td>Subroutine symbol type</td>
<td>Not used.</td>
</tr>
<tr class="row-even"><td>INAM</td>
<td><p class="first">Init Routine</p>
<p class="last">Name</p>
</td>
<td>The name of a VxWorks
subroutine to execute
during initialization.</td>
</tr>
<tr class="row-odd"><td>DIR</td>
<td>CAD Directive</td>
<td>The directive to execute.
This may be one of the
following enumerated list
values: MARK, CLEAR,
PRESET, START, or STOP.</td>
</tr>
<tr class="row-even"><td>ICID</td>
<td>Client ID (In)</td>
<td>An integer value to be
associated with the
current command.</td>
</tr>
<tr class="row-odd"><td>MESS</td>
<td>Message</td>
<td>A return message from the
CAD. This string will be
empty if the return value
is zero.</td>
</tr>
<tr class="row-even"><td>OMSS</td>
<td>Old Message</td>
<td>The previous message.</td>
</tr>
<tr class="row-odd"><td>CTYP</td>
<td><p class="first">Number of</p>
<p class="last">CAD Args</p>
</td>
<td>This value should be set
to the maximum number of
arguments a CAD record
will use. The value is
usually set by the
selected CapFast symbol.</td>
</tr>
<tr class="row-even"><td>PREC</td>
<td><p class="first">Display</p>
<p class="last">Precision</p>
</td>
<td>This value is used for the
precision of
double-precision outputs.</td>
</tr>
<tr class="row-odd"><td>MLNK</td>
<td>Mark Link</td>
<td>If the directive is MARK,
this forward link is
processed.</td>
</tr>
<tr class="row-even"><td>CLNK</td>
<td>Clear Link</td>
<td>If the directive is CLEAR,
this forward link is
processed.</td>
</tr>
<tr class="row-odd"><td>PLNK</td>
<td>Preset Link</td>
<td>If the directive is
PRESET, this forward link
is processed.</td>
</tr>
<tr class="row-even"><td>STLK</td>
<td>Start Link</td>
<td>If the directive is START,
this forward link is
processed.</td>
</tr>
<tr class="row-odd"><td>SPLK</td>
<td>Stop Link</td>
<td>If the directive is STOP,
this forward link is
processed.</td>
</tr>
<tr class="row-even"><td>OCID</td>
<td>Client ID (Out)</td>
<td>The input client ID is
sent out this field.</td>
</tr>
<tr class="row-odd"><td>OSIM</td>
<td><p class="first">Simulation</p>
<p class="last">Mode (Out)</p>
</td>
<td>The simulation mode is
sent out this field.</td>
</tr>
<tr class="row-even"><td>NARG</td>
<td>No. Inputs used</td>
<td>The actual number of
arguments used is set in
this field.</td>
</tr>
<tr class="row-odd"><td>MARK</td>
<td>Is Record Preset?</td>
<td>This field shows the
current state of the CAD.
It can be zero, indicating
no MARK has been done;
one, showing a MARK; or
two, showing a PRESET has
been done.</td>
</tr>
<tr class="row-even"><td>ERSV</td>
<td><p class="first">Error Alarm</p>
<p class="last">Severity</p>
</td>
<td>The severity of an alarm.</td>
</tr>
<tr class="row-odd"><td>SIOL</td>
<td><p class="first">Simulation</p>
<p class="last">Error Link</p>
</td>
<td>Simulation mode variables.
Refer to reference [1],
chapter 3.</td>
</tr>
<tr class="row-even"><td>SVAL</td>
<td><p class="first">Simulation</p>
<p class="last">Error</p>
</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="26%" />
<col width="59%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Name</strong></th>
<th class="head"><strong>Summary</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>SIML</td>
<td><p class="first">Simulation</p>
<p class="last">Mode Link</p>
</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>SIMM</td>
<td><p class="first">Simulation</p>
<p class="last">Mode</p>
</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>SIMS</td>
<td><p class="first">Simulation</p>
<p>Mode Alarm</p>
<p class="last">Severity</p>
</td>
<td>The value for the simulated alarm.</td>
</tr>
<tr class="row-odd"><td>INPx</td>
<td>Input Link A-T</td>
<td>The 20 input links for the arguments
to the record.</td>
</tr>
<tr class="row-even"><td>OUTx</td>
<td><p class="first">Output Link A-</p>
<p class="last">T</p>
</td>
<td>The 20 outputs are sent across these
links.</td>
</tr>
<tr class="row-odd"><td>A - T</td>
<td><p class="first">Value of Input</p>
<p class="last">A-T</p>
</td>
<td>The 20 string input arguments.</td>
</tr>
<tr class="row-even"><td>VALx</td>
<td><p class="first">Value of Output</p>
<p class="last">A-T</p>
</td>
<td>The 20 output values.</td>
</tr>
<tr class="row-odd"><td>FTVx</td>
<td><p class="first">Type of Value</p>
<p class="last">A-T</p>
</td>
<td><p class="first">The types for the 20 output values.
The type may be one of</p>
<p class="last">STRING, LONG, or DOUBLE.</p>
</td>
</tr>
</tbody>
</table>
<blockquote id="record-support-routines-1">
<div>3.3 Record Support Routines</div></blockquote>
<hr class="docutils" />
<blockquote id="init-record-1">
<div>3.3.1 init_record</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>During the first initialization pass, the output types are determined
from the FTVx fields and appropriate space is created for the VALx
fields. During the second pass, input and output links are
initialized, the initialization routine is called, and the processing
subroutine is readied. The directive field is set to CLEAR, and the
mark field is set to zero.</div></blockquote>
<p><strong>3.3.2 process</strong></p>
<blockquote>
<div><blockquote>
<div>See the next section.</div></blockquote>
<p>3.3.3 special</p>
</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>The special processing is called when a value is put to one of the
twenty fields A through T. The mark flag is set to one.</div></blockquote>
<p><strong>3.3.4 get_value</strong></p>
<blockquote>
<div>This routine fills the values of struct valueDes so that they refer
to VAL.</div></blockquote>
<p><strong>3.3.5 get_precision</strong></p>
<blockquote>
<div>This routine retrieves PREC.</div></blockquote>
<blockquote id="get-enum-str-1">
<div>3.3.6 get_enum_str</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>This routine converts the long integer values 0 through 4 into the
strings “MARK”, “CLEAR”, PRESET”, “START”, and “STOP”, respectively.</div></blockquote>
<p><strong>3.3.7 get_enum_strs</strong></p>
<blockquote>
<div>This routine returns all five of the above strings.</div></blockquote>
<p><strong>3.3.8 put_enum_str</strong></p>
<blockquote>
<div>This routine converts the above strings into the long integer values
0 through 4.</div></blockquote>
<blockquote id="record-processing-1">
<div>3.4 Record Processing</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>Record processing is very dependent upon the directive given to
process and the value of the mark field in the state machine. The
algorithm is:</div></blockquote>
<ul class="simple">
<li>If PRESET, START, or STOP with MARK==0, then return</li>
<li>If simulation, process simulation links.</li>
<li>Process all input links.</li>
<li>Process requested directive (see next sections for details).</li>
<li>Enforce rule that MESS is empty if VAL is 0.</li>
<li>Put the values on the output links.</li>
<li>Raise monitors on fields VAL, MESS, OSIM, OCID, MARK.</li>
<li>Process directive link (MLNK, CLNK, PLNK, STLK, SPLK).</li>
<li>Process forward link.</li>
</ul>
<blockquote>
<div>3.4.1 Mark Directive Processing</div></blockquote>
<hr class="docutils" />
<ul class="simple">
<li>Call user subroutine, return value in VAL.</li>
<li>Copy ICID to OCID.</li>
<li>Set mark field to 1.</li>
</ul>
<blockquote>
<div>3.4.2 Clear Directive Processing</div></blockquote>
<hr class="docutils" />
<ul class="simple">
<li>Call user subroutine, return value in VAL.</li>
<li>Copy ICID to OCID.</li>
<li>Set mark field to 0.</li>
</ul>
<blockquote>
<div>3.4.3 Preset Directive Processing</div></blockquote>
<hr class="docutils" />
<ul class="simple">
<li>Call user subroutine, return value in VAL.</li>
<li>Copy ICID to OCID.</li>
<li>Set mark field to 2.</li>
</ul>
<blockquote>
<div>3.4.4 Start Directive Processing</div></blockquote>
<hr class="docutils" />
<ul class="simple">
<li>If mark field is 1:</li>
</ul>
<blockquote>
<div><p><strong>—</strong>set directive to PRESET.</p>
<p><strong>—</strong>Call user subroutine, return value in VAL.</p>
<p><strong>—</strong>Copy ICID to OCID.</p>
<p><strong>—</strong>Process PLNK link.</p>
<p><strong>—</strong>Set mark field to 2.</p>
<p><strong>—</strong>Put the values on the output links.</p>
<p><strong>—</strong>Raise monitors.</p>
<p><strong>—</strong>set directive to START.</p>
</div></blockquote>
<ul class="simple">
<li>Call user subroutine, return value in VAL.</li>
<li>Copy ICID to OCID.</li>
<li>Set mark field to 0.</li>
</ul>
<blockquote>
<div>3.4.5 Stop Directive Processing</div></blockquote>
<hr class="docutils" />
<blockquote>
<div><p><strong>•</strong> If mark field is not 0:</p>
<p><strong>—</strong>Call user subroutine, return value in VAL.</p>
<p><strong>—</strong>Copy ICID to OCID.</p>
<p><strong>—</strong>Set mark field to 0.</p>
</div></blockquote>
<p><strong>3.5 Device Support</strong></p>
<blockquote>
<div>There is no device support available.</div></blockquote>
<blockquote id="capfast-1">
<div>3.6 CapFast</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>There are four CapFast symbols for the CAD record.</div></blockquote>
<p><strong>FIGURE 3.</strong> CapFast <em>ecad2, ecad4, ecad8, and ecad20</em> symbols</p>
<blockquote>
<div>.</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="20%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">DIR</th>
<th class="head">cad</th>
<th class="head">VAL</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ICID</td>
<td>&#160;</td>
<td>MESS</td>
</tr>
<tr class="row-odd"><td>SIML</td>
<td>&#160;</td>
<td>MARK</td>
</tr>
<tr class="row-even"><td>SIOL</td>
<td>&#160;</td>
<td>OCID</td>
</tr>
<tr class="row-odd"><td>A</td>
<td>&#160;</td>
<td>OSIM</td>
</tr>
<tr class="row-even"><td></td>
<td>&#160;</td>
<td>ODIR</td>
</tr>
<tr class="row-odd"><td></td>
<td>&#160;</td>
<td>VALA</td>
</tr>
<tr class="row-even"><td>INPA</td>
<td>&#160;</td>
<td>OUTA</td>
</tr>
<tr class="row-odd"><td>B</td>
<td>&#160;</td>
<td>VALB</td>
</tr>
<tr class="row-even"><td>INPB</td>
<td>&#160;</td>
<td>OUTB</td>
</tr>
<tr class="row-odd"><td>C</td>
<td>&#160;</td>
<td>VALC</td>
</tr>
<tr class="row-even"><td>INPC</td>
<td>&#160;</td>
<td>OUTC</td>
</tr>
<tr class="row-odd"><td>D</td>
<td>&#160;</td>
<td>VALD</td>
</tr>
<tr class="row-even"><td>INPD</td>
<td>&#160;</td>
<td>OUTD</td>
</tr>
<tr class="row-odd"><td>E</td>
<td>&#160;</td>
<td>VALE</td>
</tr>
<tr class="row-even"><td>INPE</td>
<td>&#160;</td>
<td>OUTE</td>
</tr>
<tr class="row-odd"><td>F</td>
<td>&#160;</td>
<td>VALF</td>
</tr>
<tr class="row-even"><td>INPF</td>
<td>&#160;</td>
<td>OUTF</td>
</tr>
<tr class="row-odd"><td>G</td>
<td>&#160;</td>
<td>VALG</td>
</tr>
<tr class="row-even"><td>INPG</td>
<td>&#160;</td>
<td>OUTG</td>
</tr>
<tr class="row-odd"><td>H</td>
<td>&#160;</td>
<td>VALH</td>
</tr>
<tr class="row-even"><td>INPH</td>
<td>&#160;</td>
<td>OUTH</td>
</tr>
<tr class="row-odd"><td>I</td>
<td>&#160;</td>
<td>VALI</td>
</tr>
<tr class="row-even"><td>INPI</td>
<td>&#160;</td>
<td>OUTI</td>
</tr>
<tr class="row-odd"><td>J</td>
<td>&#160;</td>
<td>VALJ</td>
</tr>
<tr class="row-even"><td>INPJ</td>
<td>&#160;</td>
<td>OUTJ</td>
</tr>
<tr class="row-odd"><td>K</td>
<td>&#160;</td>
<td>VALK</td>
</tr>
<tr class="row-even"><td>INPK</td>
<td>&#160;</td>
<td>OUTK</td>
</tr>
<tr class="row-odd"><td>L</td>
<td>&#160;</td>
<td>VALL</td>
</tr>
<tr class="row-even"><td>INPL</td>
<td>&#160;</td>
<td>OUTL</td>
</tr>
<tr class="row-odd"><td>M</td>
<td>&#160;</td>
<td>VALM</td>
</tr>
<tr class="row-even"><td>INPM</td>
<td>&#160;</td>
<td>OUTM</td>
</tr>
<tr class="row-odd"><td>N</td>
<td>&#160;</td>
<td>VALN</td>
</tr>
<tr class="row-even"><td>INPN</td>
<td>&#160;</td>
<td>OUTN</td>
</tr>
<tr class="row-odd"><td>O</td>
<td>&#160;</td>
<td>VALO</td>
</tr>
<tr class="row-even"><td>INPO</td>
<td>&#160;</td>
<td>OUTO</td>
</tr>
<tr class="row-odd"><td>P</td>
<td>&#160;</td>
<td>VALP</td>
</tr>
<tr class="row-even"><td>INPP</td>
<td>&#160;</td>
<td>OUTP</td>
</tr>
<tr class="row-odd"><td>Q</td>
<td>&#160;</td>
<td>VALQ</td>
</tr>
<tr class="row-even"><td>INPQ</td>
<td>&#160;</td>
<td>OUTQ</td>
</tr>
<tr class="row-odd"><td>R</td>
<td>&#160;</td>
<td>VALR</td>
</tr>
<tr class="row-even"><td>INPR</td>
<td>&#160;</td>
<td>OUTR</td>
</tr>
<tr class="row-odd"><td>S</td>
<td>&#160;</td>
<td>VALS</td>
</tr>
<tr class="row-even"><td>INPS</td>
<td>&#160;</td>
<td>OUTS</td>
</tr>
<tr class="row-odd"><td>T</td>
<td>&#160;</td>
<td>VALT</td>
</tr>
<tr class="row-even"><td>INPT</td>
<td>&#160;</td>
<td>OUTT</td>
</tr>
<tr class="row-odd"><td>SLNK</td>
<td>&#160;</td>
<td>FLNK</td>
</tr>
<tr class="row-even"><td></td>
<td>&#160;</td>
<td>MLNK</td>
</tr>
<tr class="row-odd"><td></td>
<td>&#160;</td>
<td>CLNK</td>
</tr>
<tr class="row-even"><td></td>
<td>&#160;</td>
<td>PLNK</td>
</tr>
<tr class="row-odd"><td></td>
<td>&#160;</td>
<td>STLK</td>
</tr>
<tr class="row-even"><td>SDIS</td>
<td>&#160;</td>
<td>SPLK</td>
</tr>
<tr class="row-odd"><td></td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="20%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">DIR</th>
<th class="head">cad</th>
<th class="head">VAL</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ICID</td>
<td>&#160;</td>
<td>MESS</td>
</tr>
<tr class="row-odd"><td>SIML</td>
<td>&#160;</td>
<td>MARK</td>
</tr>
<tr class="row-even"><td>SIOL</td>
<td>&#160;</td>
<td>OCID</td>
</tr>
<tr class="row-odd"><td>A</td>
<td>&#160;</td>
<td>OSIM</td>
</tr>
<tr class="row-even"><td></td>
<td>&#160;</td>
<td>ODIR</td>
</tr>
<tr class="row-odd"><td></td>
<td>&#160;</td>
<td>VALA</td>
</tr>
<tr class="row-even"><td>INPA</td>
<td>&#160;</td>
<td>OUTA</td>
</tr>
<tr class="row-odd"><td>B</td>
<td>&#160;</td>
<td>VALB</td>
</tr>
<tr class="row-even"><td>INPB</td>
<td>&#160;</td>
<td>OUTB</td>
</tr>
<tr class="row-odd"><td>C</td>
<td>&#160;</td>
<td>VALC</td>
</tr>
<tr class="row-even"><td>INPC</td>
<td>&#160;</td>
<td>OUTC</td>
</tr>
<tr class="row-odd"><td>D</td>
<td>&#160;</td>
<td>VALD</td>
</tr>
<tr class="row-even"><td>INPD</td>
<td>&#160;</td>
<td>OUTD</td>
</tr>
<tr class="row-odd"><td>E</td>
<td>&#160;</td>
<td>VALE</td>
</tr>
<tr class="row-even"><td>INPE</td>
<td>&#160;</td>
<td>OUTE</td>
</tr>
<tr class="row-odd"><td>F</td>
<td>&#160;</td>
<td>VALF</td>
</tr>
<tr class="row-even"><td>INPF</td>
<td>&#160;</td>
<td>OUTF</td>
</tr>
<tr class="row-odd"><td>G</td>
<td>&#160;</td>
<td>VALG</td>
</tr>
<tr class="row-even"><td>INPG</td>
<td>&#160;</td>
<td>OUTG</td>
</tr>
<tr class="row-odd"><td>H</td>
<td>&#160;</td>
<td>VALH</td>
</tr>
<tr class="row-even"><td>INPH</td>
<td>&#160;</td>
<td>OUTH</td>
</tr>
<tr class="row-odd"><td>SLNK</td>
<td>&#160;</td>
<td>FLNK</td>
</tr>
<tr class="row-even"><td></td>
<td>&#160;</td>
<td>MLNK</td>
</tr>
<tr class="row-odd"><td></td>
<td>&#160;</td>
<td>CLNK</td>
</tr>
<tr class="row-even"><td></td>
<td>&#160;</td>
<td>PLNK</td>
</tr>
<tr class="row-odd"><td></td>
<td>&#160;</td>
<td>STLK</td>
</tr>
<tr class="row-even"><td>SDIS</td>
<td>&#160;</td>
<td>SPLK</td>
</tr>
<tr class="row-odd"><td></td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="20%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">DIR</th>
<th class="head">cad</th>
<th class="head">VAL</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ICID</td>
<td>&#160;</td>
<td>MESS</td>
</tr>
<tr class="row-odd"><td>SIML</td>
<td>&#160;</td>
<td>MARK</td>
</tr>
<tr class="row-even"><td>SIOL</td>
<td>&#160;</td>
<td>OCID</td>
</tr>
<tr class="row-odd"><td>A</td>
<td>&#160;</td>
<td>OSIM</td>
</tr>
<tr class="row-even"><td></td>
<td>&#160;</td>
<td>ODIR</td>
</tr>
<tr class="row-odd"><td></td>
<td>&#160;</td>
<td>VALA</td>
</tr>
<tr class="row-even"><td>INPA</td>
<td>&#160;</td>
<td>OUTA</td>
</tr>
<tr class="row-odd"><td>B</td>
<td>&#160;</td>
<td>VALB</td>
</tr>
<tr class="row-even"><td>INPB</td>
<td>&#160;</td>
<td>OUTB</td>
</tr>
<tr class="row-odd"><td>C</td>
<td>&#160;</td>
<td>VALC</td>
</tr>
<tr class="row-even"><td>INPC</td>
<td>&#160;</td>
<td>OUTC</td>
</tr>
<tr class="row-odd"><td>D</td>
<td>&#160;</td>
<td>VALD</td>
</tr>
<tr class="row-even"><td>INPD</td>
<td>&#160;</td>
<td>OUTD</td>
</tr>
<tr class="row-odd"><td>SLNK</td>
<td>&#160;</td>
<td>FLNK</td>
</tr>
<tr class="row-even"><td></td>
<td>&#160;</td>
<td>MLNK</td>
</tr>
<tr class="row-odd"><td></td>
<td>&#160;</td>
<td>CLNK</td>
</tr>
<tr class="row-even"><td></td>
<td>&#160;</td>
<td>PLNK</td>
</tr>
<tr class="row-odd"><td></td>
<td>&#160;</td>
<td>STLK</td>
</tr>
<tr class="row-even"><td>SDIS</td>
<td>&#160;</td>
<td>SPLK</td>
</tr>
<tr class="row-odd"><td></td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="20%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">DIR</th>
<th class="head">cad</th>
<th class="head">VAL</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ICID</td>
<td>&#160;</td>
<td>MESS</td>
</tr>
<tr class="row-odd"><td>SIML</td>
<td>&#160;</td>
<td>MARK</td>
</tr>
<tr class="row-even"><td>SIOL</td>
<td>&#160;</td>
<td>OCID</td>
</tr>
<tr class="row-odd"><td>A</td>
<td>&#160;</td>
<td>OSIM</td>
</tr>
<tr class="row-even"><td></td>
<td>&#160;</td>
<td>ODIR</td>
</tr>
<tr class="row-odd"><td></td>
<td>&#160;</td>
<td>VALA</td>
</tr>
<tr class="row-even"><td>INPA</td>
<td>&#160;</td>
<td>OUTA</td>
</tr>
<tr class="row-odd"><td>B</td>
<td>&#160;</td>
<td>VALB</td>
</tr>
<tr class="row-even"><td>INPB</td>
<td>&#160;</td>
<td>OUTB</td>
</tr>
<tr class="row-odd"><td>SLNK</td>
<td>&#160;</td>
<td>FLNK</td>
</tr>
<tr class="row-even"><td></td>
<td>&#160;</td>
<td>MLNK</td>
</tr>
<tr class="row-odd"><td></td>
<td>&#160;</td>
<td>CLNK</td>
</tr>
<tr class="row-even"><td></td>
<td>&#160;</td>
<td>PLNK</td>
</tr>
<tr class="row-odd"><td></td>
<td>&#160;</td>
<td>STLK</td>
</tr>
<tr class="row-even"><td>SDIS</td>
<td>&#160;</td>
<td>SPLK</td>
</tr>
<tr class="row-odd"><td></td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<blockquote>
<div>NPPNMSNPPNMSNPPNMSNPPNMS NPPNMSNPPNMSNPPNMSNPPNMS</div></blockquote>
<p>NPPNMSNPPNMS NPPNMSNPPNMS NPPNMSNPPNMS NPPNMSNPPNMS</p>
<p>NPPNMSNPPNMS NPPNMSNPPNMS NPPNMSNPPNMS NPPNMSNPPNMS</p>
<p>NPPNMSNPPNMS NPPNMSNPPNMS NPPNMSNPPNMS</p>
<blockquote>
<div>NPPNMS</div></blockquote>
<p>NPPNMS NPPNMSNPPNMS NPPNMSNPPNMS NPPNMSNPPNMS</p>
<blockquote>
<div>NPPNMS</div></blockquote>
<p>NPPNMSNPPNMSNPPNMS NPPNMSNPPNMS</p>
<blockquote>
<div>NPPNMSNPPNMSNPPNMS</div></blockquote>
<p>NPPNMS NPPNMSNPPNMS NPPNMSNPPNMS</p>
<blockquote>
<div>NPPNMS</div></blockquote>
<p>NPPNMS NPPNMSNPPNMS NPPNMSNPPNMS</p>
<blockquote>
<div>NPPNMSNPPNMS</div></blockquote>
<p>NPPNMSNPPNMS NPPNMSNPPNMS</p>
<blockquote>
<div><p>NPPNMSNPPNMS</p>
<p>NPPNMS</p>
</div></blockquote>
<p>NPPNMS NPPNMSNPPNMS</p>
<blockquote>
<div>NPPNMS</div></blockquote>
<p>NPPNMS NPPNMSNPPNMS</p>
<blockquote>
<div><p>NPPNMSNPPNMS</p>
<p>NPPNMSNPPNMS</p>
<p>NPPNMSNPPNMS</p>
<p>NPPNMSNPPNMS</p>
<p>NPPNMSNPPNMS</p>
<p>NPPNMSNPPNMS</p>
<p>NPPNMSNPPNMS</p>
<p>NPPNMSNPPNMS</p>
<p>NPPNMSNPPNMS</p>
<p>NPPNMSNPPNMS</p>
<p>NPPNMS</p>
<p>NPPNMS</p>
<p>NPPNMS</p>
<p>NPPNMS</p>
<p>NPPNMSNPPNMS</p>
<p>.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="car-command-action-response-record">
<h2>4.0 CAR - Command Action Response Record<a class="headerlink" href="#car-command-action-response-record" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The CAR record provides information about the state of a particular
action occurring within a database. Possible states of the CAR record
are UNAVAILABLE, IDLE, BUSY, PAUSED, and ERR. The allowable
transitions between the states are illustrated in the figure below.</div></blockquote>
<blockquote id="field-summary-2">
<div>4.1 Field Summary</div></blockquote>
<hr class="docutils" />
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Fi
eld</strong></th>
<th class="head"><strong>T
ype</strong></th>
<th class="head">**
DCT**</th>
<th class="head"><ul class="first simple">
<li></li>
</ul>
<p class="last"><em>Init
ial*</em></p>
</th>
<th class="head"><strong>Acc
ess</strong></th>
<th class="head"><strong>Mod
ify</strong></th>
<th class="head"><strong>Rec
Proc
Moni
tor</strong></th>
<th class="head"><ul class="first simple">
<li></li>
</ul>
<p class="last"><em>PP*</em></p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>VAL</td>
<td>RECC
HOICE</td>
<td>Yes</td>
<td>Idle</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>CLID</td>
<td>LONG</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-even"><td>OMSS</td>
<td>S
TRING</td>
<td>No</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OERR</td>
<td>LONG</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-even"><td>IVAL</td>
<td>LONG</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>ICID</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>IMSS</td>
<td>S
TRING</td>
<td>No</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>IERR</td>
<td>LONG</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>AVAL</td>
<td>LONG</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>MVAL</td>
<td>LONG</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>ACID</td>
<td>LONG</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>MCID</td>
<td>LONG</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>AMSS</td>
<td>S
TRING</td>
<td>No</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>MMSS</td>
<td>S
TRING</td>
<td>No</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>AERR</td>
<td>LONG</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>MERR</td>
<td>LONG</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>ERSV</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>SIOL</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>SVAL</td>
<td>LONG</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>SIML</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>SIMM</td>
<td>RECC
HOICE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>SIMS</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
</tbody>
</table>
<blockquote id="field-descriptions-2">
<div>4.2 Field Descriptions</div></blockquote>
<hr class="docutils" />
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="27%" />
<col width="58%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Name</strong></th>
<th class="head"><strong>Summary</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>VAL</td>
<td>State</td>
<td>Current state</td>
</tr>
<tr class="row-odd"><td>CLID</td>
<td>Client ID</td>
<td>Value of the latest client ID</td>
</tr>
<tr class="row-even"><td>OMSS</td>
<td>Message (out)</td>
<td>Output message</td>
</tr>
<tr class="row-odd"><td>OERR</td>
<td>Error Code (out)</td>
<td>Output error code</td>
</tr>
<tr class="row-even"><td>IVAL</td>
<td>State (in)</td>
<td>Input state transition</td>
</tr>
<tr class="row-odd"><td>ICID</td>
<td>Client ID (in)</td>
<td>Link to client ID</td>
</tr>
<tr class="row-even"><td>IMSS</td>
<td>Message (in)</td>
<td>Input message</td>
</tr>
<tr class="row-odd"><td>IERR</td>
<td>Error Code (in)</td>
<td>Input error code</td>
</tr>
<tr class="row-even"><td>AVAL</td>
<td><p class="first">Last State</p>
<p class="last">Archived</p>
</td>
<td>The last state value which was
archived</td>
</tr>
<tr class="row-odd"><td><strong>Name</strong></td>
<td><strong>Summary</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr class="row-even"><td>MVAL</td>
<td><p class="first">Last State</p>
<p class="last">Monitored</p>
</td>
<td>The last state value which generated
a monitor event</td>
</tr>
<tr class="row-odd"><td>ACID</td>
<td><p class="first">Last Client ID</p>
<p class="last">Archived</p>
</td>
<td>The last Client ID which generated
an archive event</td>
</tr>
<tr class="row-even"><td>MCID</td>
<td><p class="first">Last Client ID</p>
<p class="last">Monitored</p>
</td>
<td>The last Client ID which generated a
monitor event</td>
</tr>
<tr class="row-odd"><td>AMSS</td>
<td><p class="first">Last Message</p>
<p class="last">Archived</p>
</td>
<td>The last message which generated an
archive event</td>
</tr>
<tr class="row-even"><td>MMSS</td>
<td><p class="first">Last Message</p>
<p class="last">Monitored</p>
</td>
<td>The last message which generated a
monitor event</td>
</tr>
<tr class="row-odd"><td>AERR</td>
<td><p class="first">Last Error Code</p>
<p class="last">Archived</p>
</td>
<td>The last error code which generated
an archive event</td>
</tr>
<tr class="row-even"><td>MERR</td>
<td><p class="first">Last Error Code</p>
<p class="last">Monitored</p>
</td>
<td>The last error code which generated
a monitor event</td>
</tr>
<tr class="row-odd"><td>ERSV</td>
<td><p class="first">Error Alarm</p>
<p class="last">Severity</p>
</td>
<td>The severity code of the error alarm</td>
</tr>
<tr class="row-even"><td>SIOL</td>
<td><p class="first">Simulation</p>
<p class="last">Error Link</p>
</td>
<td>Simulation mode variables. Refer to
reference [1], chapter 3.</td>
</tr>
<tr class="row-odd"><td>SVAL</td>
<td><p class="first">Simulation</p>
<p class="last">Error</p>
</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>SIML</td>
<td><p class="first">Simulation</p>
<p class="last">Mode Link</p>
</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>SIMM</td>
<td><p class="first">Simulation</p>
<p class="last">Mode</p>
</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>SIMS</td>
<td><p class="first">Simulation</p>
<p>Mode Alarm</p>
<p class="last">Severity</p>
</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<blockquote id="record-support-routines-2">
<div>4.3 Record Support Routines</div></blockquote>
<hr class="docutils" />
<blockquote id="init-record-2">
<div>4.3.1 init_record</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>This routine sets the current state to IDLE and clears the input
message and error code. Any simulation modes or links are also
initialized.</div></blockquote>
<p><strong>4.3.2 process</strong></p>
<blockquote>
<div>See the next section.</div></blockquote>
<p><strong>4.3.3 get_value</strong></p>
<blockquote>
<div>This routine fills the values of struct valueDes so that they refer
to VAL.</div></blockquote>
<blockquote id="get-enum-str-2">
<div>4.3.4 get_enum_str</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>This routine converts the long integer values 0 through 5 into the
strings “UNAVAILABLE”, “IDLE”, “PAUSED”, “ERR”, “BUSY”, and “UNKNOWN”
respectively.</div></blockquote>
<p><strong>4.3.5 get_enum_strs</strong></p>
<blockquote>
<div>This routine returns all of the above strings.</div></blockquote>
<p><strong>4.3.6 put_enum_str</strong></p>
<blockquote>
<div>This routine converts the state strings into values 0 through 5.</div></blockquote>
<blockquote id="record-processing-2">
<div>4.4 Record Processing</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>Record processing begins when a value is written into the IVAL field.
The client ID is read from the ICID link and put into CLID. The input
value is used to transition the CAR state machine and the input
message and input error code are placed into the output message and
output error code fields. If the state machine transitions to the
ERROR state an alarm is generated.</div></blockquote>
<p>Monitors are posted if the output value is different than the last
output value or the client ID is different than the old client ID.
Monitors are posted on the VAL, CLID, OMSS, and OERR fields.</p>
<p><strong>4.5 Device Support</strong></p>
<blockquote>
<div>There is no device support available.</div></blockquote>
<blockquote id="capfast-2">
<div>4.6 CapFast</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>There is one CapFast symbol for the CAR record.</div></blockquote>
<p><strong>FIGURE 5.</strong> CapFast <em>ecars</em> symbol .</p>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="23%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">IVAL</th>
<th class="head">car</th>
<th class="head">VAL</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ICID</td>
<td>&#160;</td>
<td>CLID</td>
</tr>
<tr class="row-odd"><td>IMSS</td>
<td>&#160;</td>
<td>OMSS</td>
</tr>
<tr class="row-even"><td>IERR</td>
<td>&#160;</td>
<td>OERR</td>
</tr>
<tr class="row-odd"><td>SIML</td>
<td>&#160;</td>
<td>FLNK</td>
</tr>
<tr class="row-even"><td>SIOL</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>SLNK</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>SDIS</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td></td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>NPPNMS</p>
<p>NPPNMS</p>
<p>NPPNMS</p>
<p>NPPNMS</p>
<p>.</p>
</div></blockquote>
</div>
<div class="section" id="sir-status-information-record">
<h2>5.0 SIR - Status Information Record<a class="headerlink" href="#sir-status-information-record" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The Status Information Record provides a standard information-passing
mechanism between Gemini principle systems. The SIR records for any
Gemini system are expected to be combined into a separate database
called the Status Alarm Database (SAD) and loaded into the SAD IOC.</div></blockquote>
<p>SIR records combine three important parts of Gemini EPICS status
reporting: a status value, status message, and alarms. The status value
is read through the INP link, the status message is placed into the IMSS
link. Alarms are propagated to the SIR record by the input link.</p>
<p>There are three valid output data types: long integer, double precision,
and string. A subroutine supplied by the user can be attached to the
SNAM field and called during record processing. This subroutine can
convert the input, raise additional alarms, or enhance the output
message string.</p>
<blockquote>
<div>A full description of the SIR record’s function is expected in the
FDSC field. This field can hold a 40 character string which is used
by the OCS when displaying the SIR value.</div></blockquote>
<blockquote id="field-summary-3">
<div>5.1 Field Summary</div></blockquote>
<hr class="docutils" />
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Fi
eld</strong></th>
<th class="head"><strong>T
ype</strong></th>
<th class="head">**
DCT**</th>
<th class="head"><ul class="first simple">
<li></li>
</ul>
<p class="last"><em>Init
ial*</em></p>
</th>
<th class="head"><strong>Acc
ess</strong></th>
<th class="head"><strong>Mod
ify</strong></th>
<th class="head"><strong>Rec
Proc
Moni
tor</strong></th>
<th class="head"><ul class="first simple">
<li></li>
</ul>
<p class="last"><em>PP*</em></p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>INP</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>IMSS</td>
<td>S
TRING</td>
<td>No</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>FDSC</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>FTVL</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>EGU</td>
<td>S
TRING</td>
<td>Yes</td>
<td>units</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>VAL</td>
<td>VOID
*</td>
<td>No</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>OMSS</td>
<td>S
TRING</td>
<td>No</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>SNAM</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>SADR</td>
<td>LONG</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>STYP</td>
<td>SHORT</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>PREC</td>
<td>SHORT</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>AVAL</td>
<td>VOID
*</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>MVAL</td>
<td>VOID
*</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>AMSS</td>
<td>S
TRING</td>
<td>No</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>MMSS</td>
<td>S
TRING</td>
<td>No</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>LALM</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>XXX</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>HIHI</td>
<td>FLOAT</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>LOLO</td>
<td>FLOAT</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>HIGH</td>
<td>FLOAT</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>LOW</td>
<td>FLOAT</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>BRSV</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>HHSV</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>LLSV</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>HSV</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>LSV</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>HYST</td>
<td>D
OUBLE</td>
<td>Yes</td>
<td>0</td>
<td>XXX</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>ADEL</td>
<td>D
OUBLE</td>
<td>Yes</td>
<td>0</td>
<td>XXX</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>MDEL</td>
<td>D
OUBLE</td>
<td>Yes</td>
<td>0</td>
<td>XXX</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>SIOL</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>SVAL</td>
<td>S
TRING</td>
<td>No</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>SIML</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>SIMM</td>
<td>RECC
HOICE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>SIMS</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
</tbody>
</table>
<blockquote id="field-descriptions-3">
<div>5.2 Field Descriptions</div></blockquote>
<hr class="docutils" />
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="39%" />
<col width="45%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Name</strong></th>
<th class="head"><strong>Summary</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>INP</td>
<td>Input Link</td>
<td>A CA link to the value to
be reported. This value
must match the type
declared in FTVL.</td>
</tr>
<tr class="row-odd"><td>IMSS</td>
<td>Message In</td>
<td>The input message.</td>
</tr>
<tr class="row-even"><td>FDSC</td>
<td>Full Description</td>
<td>A 40 character description
of the SIR record</td>
</tr>
<tr class="row-odd"><td>FTVL</td>
<td>Type of value</td>
<td>The data type of the input
link. May be either LONG,
DOUBLE, or STRING.</td>
</tr>
<tr class="row-even"><td>EGU</td>
<td><p class="first">Engineering</p>
<p class="last">Units</p>
</td>
<td>The units of the value.</td>
</tr>
<tr class="row-odd"><td>VAL</td>
<td>Value Out</td>
<td>The input value converted
to a string.</td>
</tr>
<tr class="row-even"><td>OMSS</td>
<td>Message Out</td>
<td>The output message.</td>
</tr>
<tr class="row-odd"><td>SNAM</td>
<td><p class="first">Subroutine</p>
<p class="last">Name</p>
</td>
<td>The VxWorks name of a
subroutine to perform
additional conversion
between the input and
output values.</td>
</tr>
<tr class="row-even"><td>SADR</td>
<td><p class="first">Subroutine</p>
<p class="last">Address</p>
</td>
<td>The internal
representation of the
subroutine address.</td>
</tr>
<tr class="row-odd"><td>STYP</td>
<td>Subroutine symbol type</td>
<td>Not used.</td>
</tr>
<tr class="row-even"><td>PREC</td>
<td><p class="first">Display</p>
<p class="last">Precision</p>
</td>
<td>This value is used for the
precision of
double-precision output.</td>
</tr>
<tr class="row-odd"><td>AVAL</td>
<td><p class="first">Last Value</p>
<p class="last">Archived</p>
</td>
<td>This value is used to
determine if the new value
needs to generate an
archive monitor.</td>
</tr>
<tr class="row-even"><td>MVAL</td>
<td><p class="first">Last Value</p>
<p class="last">Monitored</p>
</td>
<td>This value is used to
determine if the new value
needs to generate a
monitor.</td>
</tr>
<tr class="row-odd"><td>AMSS</td>
<td><p class="first">Last Message</p>
<p class="last">Archived</p>
</td>
<td>This string used to
determine if the new
message string needs to
generate an archive
monitor</td>
</tr>
<tr class="row-even"><td>MMSS</td>
<td><p class="first">Last Message</p>
<p class="last">Monitored</p>
</td>
<td>This string used to
determine if the new
message string needs to
generate a monitor.</td>
</tr>
<tr class="row-odd"><td>LALM</td>
<td><p class="first">Last Value</p>
<p class="last">Alarmed</p>
</td>
<td>This value saves the last
value that caused an
alarm.</td>
</tr>
<tr class="row-even"><td>HIHI</td>
<td><p class="first">Hihi Alarm</p>
<p class="last">Limit</p>
</td>
<td>This sets the HI-HI alarm
limit.</td>
</tr>
<tr class="row-odd"><td>LOLO</td>
<td><p class="first">Lolo Alarm</p>
<p class="last">Limit</p>
</td>
<td>This sets the LOW-LOW
alarm limit.</td>
</tr>
<tr class="row-even"><td>HIGH</td>
<td><p class="first">High Alarm</p>
<p class="last">Limit</p>
</td>
<td>This sets the HIGH alarm
limit.</td>
</tr>
<tr class="row-odd"><td>LOW</td>
<td><p class="first">Low Alarm</p>
<p class="last">Limit</p>
</td>
<td>This sets the low alarm
limit.</td>
</tr>
<tr class="row-even"><td>BRSV</td>
<td><p class="first">Bad Sub Return</p>
<p class="last">Severity</p>
</td>
<td>This alarm is set if the
user subroutine returns a
non-zero value.</td>
</tr>
<tr class="row-odd"><td>HHSV</td>
<td>Hihi Severity</td>
<td>This alarm is set if the
HIGH-HIGH value is
reached.</td>
</tr>
<tr class="row-even"><td>LLSV</td>
<td>Lolo Severity</td>
<td>This alarm is set if the
LOW-LOW value is reached.</td>
</tr>
<tr class="row-odd"><td>HSV</td>
<td>High Severity</td>
<td>This alarm is set if the
HIGH value is reached.</td>
</tr>
<tr class="row-even"><td>LSV</td>
<td>Low Severity</td>
<td>This alarm is set if the
LOW value is reached.</td>
</tr>
<tr class="row-odd"><td><strong>Name</strong></td>
<td><strong>Summary</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr class="row-even"><td>HYST</td>
<td><p class="first">Alarm</p>
<p class="last">Deadband</p>
</td>
<td>This sets the hysteresis
range for alarm reporting.</td>
</tr>
<tr class="row-odd"><td>ADEL</td>
<td><p class="first">Archive</p>
<p class="last">Deadband</p>
</td>
<td>This set the archive
hysteresis range.</td>
</tr>
<tr class="row-even"><td>MDEL</td>
<td><p class="first">Monitor</p>
<p class="last">Deadband</p>
</td>
<td>This sets the monitor
hysteresis range.</td>
</tr>
<tr class="row-odd"><td>SIOL</td>
<td><p class="first">Simulation</p>
<p class="last">Value Link</p>
</td>
<td><p class="first">In simulation mode this
link value is read and
returned in</p>
<p class="last">VAL.</p>
</td>
</tr>
<tr class="row-even"><td>SVAL</td>
<td><p class="first">Simulation</p>
<p class="last">Value</p>
</td>
<td>The simulation value is
stored here.</td>
</tr>
<tr class="row-odd"><td>SIML</td>
<td><p class="first">Simulation</p>
<p class="last">Mode Link</p>
</td>
<td>This link determines if
the record is in
simulation mode or not.</td>
</tr>
<tr class="row-even"><td>SIMM</td>
<td><p class="first">Simulation</p>
<p class="last">Mode</p>
</td>
<td>The simulation mode is
stored here.</td>
</tr>
<tr class="row-odd"><td>SIMS</td>
<td><p class="first">Simulation</p>
<p>Mode Alarm</p>
<p class="last">Severity</p>
</td>
<td>This is the value of the
simulation mode alarm
severity.</td>
</tr>
</tbody>
</table>
<blockquote id="record-support-routines-3">
<div>5.3 Record Support Routines</div></blockquote>
<hr class="docutils" />
<blockquote id="init-record-3">
<div>5.3.1 init_record</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>On the first pass, space is allocated for the VAL, SVAL, MVAL, AVAL
fields, based upon the type of FTVL field (DBF_STRING, DBF_DOUBLE, or
DBF_LONG). On the second pass, the simulation mode is checked and if
true, the simulation mode and input link are set. The address of the
process subroutine (SNAM) is found.</div></blockquote>
<p><strong>5.3.2 process</strong></p>
<blockquote>
<div>See the next section.</div></blockquote>
<p><strong>5.3.3 get_value</strong></p>
<blockquote>
<div>This routine fills the values of struct valueDes so that they refer
to VAL.</div></blockquote>
<p><strong>5.3.4 get_precision</strong></p>
<blockquote>
<div>This routine retrieves PREC.</div></blockquote>
<p><strong>5.3.5 get_units</strong></p>
<blockquote>
<div><blockquote>
<div>This routine returns EGU.</div></blockquote>
<p>5.3.6 cvt_dbaddr</p>
</div></blockquote>
<hr class="docutils" />
<blockquote>
<div><blockquote>
<div>This routine converts the VAL field to either string, double
precision, or long integer based upon the value of FTVL.</div></blockquote>
<p>5.3.7 get_alarm_double</p>
</div></blockquote>
<hr class="docutils" />
<blockquote>
<div><p>This routine sets the following values:</p>
<p>upper_alarm_limit = HIHI upper_warning_limit = HIGH
lower_warning_limit = LOW lower_alarm_limit = LOLO</p>
</div></blockquote>
<blockquote id="record-processing-3">
<div>5.4 Record Processing</div></blockquote>
<hr class="docutils" />
<blockquote>
<div><p>In simulation mode, the simulation value is fetched from the link.
Otherwise the values is fetched from the INP link. The user
subroutine (SNAM) is executed and the return value is checked. For
return values of zero, the input message IMSS is copied to the output
message OMSS, the record is time stamped, alarms and monitors are
checked, and the forward link is processed.</p>
<p>An alarm is set if the value is outside the preset range limits
(HIHI, HIGH, LOW, LOLO) and outside of the hysteresis range (HYST).</p>
<p>Logging and archive monitors are raised on VAL and OMSS if their
value changes. For double precision and long integer values of VAL
the change must be greater than the hysteresis ranges (MDEL and
ADEL).</p>
</div></blockquote>
<p><strong>5.5 Device Support</strong></p>
<blockquote>
<div>No device support is available.</div></blockquote>
<blockquote id="capfast-3">
<div>5.6 CapFast</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>There is one CapFast symbol for the SIR record.</div></blockquote>
<p><strong>FIGURE 6.</strong> CapFast <em>esirs</em> symbol</p>
<blockquote>
<div>.</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">INP</th>
<th class="head">sir</th>
<th class="head">FLNK</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>IMSS</td>
<td>&#160;</td>
<td>VAL</td>
</tr>
<tr class="row-odd"><td>SIML</td>
<td>&#160;</td>
<td>OMSS</td>
</tr>
<tr class="row-even"><td>SIOL</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>SLNK</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>SDIS</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td></td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>NPP NMS</p>
<p>NPPNMS</p>
<p>NPPNMS</p>
<p>NPPNMS</p>
<p>.</p>
</div></blockquote>
</div>
<div class="section" id="lutout-lookup-table-output-record">
<h2>6.0 lutout - Lookup Table Output Record<a class="headerlink" href="#lutout-lookup-table-output-record" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The lutout record converts a character string tag into up to four
output values. The output values may be either string,
double-precision, or long integer, and are selected through the FTVA,
FTVB, FTVC, and FTVD fields. The conversion is performed on the value
found in the lookup table for the appropriate output, thus if the
conversion is to a long integer type the lookup table value should be
an ASCII string representation of a long integer. Conversion of
string values consists of copying the lookup table value to the
output field. A character string tag may have outputs with mixed
types, however each output field’s type is fixed at initialization.</p>
<p>The lutout record may selectively send values to the output fields by
using the SELB field. This field is a bit mask for the enabled output
fields. If the bit mask is 1, then only the VALA field will be
written, if it is 3, then both VALA and VALB will be written. A value
of 15 will write to all four output fields. The number of fields
successfully written will be placed in the NVAL field. This value is
the intersection of the bits set in SELB and the number of values in
a tag’s lookup table entry. The SEVR and STAT alarm fields are set to
INVALID and SOFT if an input configuration string is not recognized</p>
<p>The lookup table can be reread from the file by writing a one to the
LOAD field.</p>
</div></blockquote>
<p>A lutout record can reference another lutout or lutin record’s lookup
table by making a connection between its LLNK field and the other
record’s LTBL field. The record can now find a tag in either its lookup
table or the table from the other record. This feature can only work
within an IOC; it will not work across channel access. <em>[This feature is
not yet implemented].</em></p>
<blockquote>
<div>More information and examples can be found in the lutout manual[3].</div></blockquote>
<p><strong>6.1 Field Summary</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="16%" />
<col width="15%" />
<col width="15%" />
<col width="16%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Field</strong></th>
<th class="head"><strong>Type</strong></th>
<th class="head"><strong>Initial</strong></th>
<th class="head"><strong>Access</strong></th>
<th class="head"><strong>Modify</strong></th>
<th class="head"><strong>Monitor</strong></th>
<th class="head"><strong>PP</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>VAL</td>
<td>STRING</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>OVAL</td>
<td>STRING</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>FDIR</td>
<td>STRING</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>FNAM</td>
<td>STRING</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>NVAL</td>
<td>LONG</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>ONVL</td>
<td>LONG</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>SELB</td>
<td>LONG</td>
<td>15</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>LOAD</td>
<td>LONG</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Special</td>
</tr>
<tr class="row-even"><td>LTBL</td>
<td>NOACCESS</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>LLNK</td>
<td>INLINK</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>PREC</td>
<td>LONG</td>
<td>2</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>VALA</td>
<td>NOACCESS</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-even"><td>VALB</td>
<td>NOACCESS</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>VALC</td>
<td>NOACCESS</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-even"><td>VALD</td>
<td>NOACCESS</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OLDA</td>
<td>NOACCESS</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>OLDB</td>
<td>NOACCESS</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OLDC</td>
<td>NOACCESS</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>OLDD</td>
<td>NOACCESS</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OUTA</td>
<td>OUTLINK</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>OUTB</td>
<td>OUTLINK</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OUTC</td>
<td>OUTLINK</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>OUTD</td>
<td>OUTLINK</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>FTVA</td>
<td>GBLCHOICE</td>
<td>STRING</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>FTVB</td>
<td>GBLCHOICE</td>
<td>STRING</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>FTVC</td>
<td>GBLCHOICE</td>
<td>STRING</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>FTVD</td>
<td>GBLCHOICE</td>
<td>STRING</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
</tbody>
</table>
<blockquote>
<div>6.2 Field Description</div></blockquote>
<hr class="docutils" />
<p><strong>TABLE 1.</strong> Lutout Record Field Description</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="21%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Name</strong></th>
<th class="head"><strong>Summary</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>VAL</td>
<td>Input string</td>
<td>An ASCII string which corresponds to a
tag entry in the lookup table.</td>
</tr>
<tr class="row-odd"><td>OVAL</td>
<td>Old tag</td>
<td>The previous value.</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="42%" />
<col width="42%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Name</strong></th>
<th class="head"><strong>Summary</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>FDIR</td>
<td>Initialization file
directory</td>
<td>The name of the directory
of the lookup table.</td>
</tr>
<tr class="row-odd"><td>FNAM</td>
<td>Initialization file name</td>
<td>The name of the file for
the lookup table.</td>
</tr>
<tr class="row-even"><td>NVAL</td>
<td>Number of outputs</td>
<td>This is the number of
values found in the lookup
table for the appropriate
input tag. It is between 0
and 4.</td>
</tr>
<tr class="row-odd"><td>ONVL</td>
<td>Old number</td>
<td>The previous value of
NVAL. Used for triggering
monitors.</td>
</tr>
<tr class="row-even"><td>SELB</td>
<td>Selection Bits</td>
<td>This is a bit mask for the
values which are to be
converted. If SELB is 1,
only VALA will be written;
if 3, VALA and VALB will
be written. A value of 15
will write all values.</td>
</tr>
<tr class="row-odd"><td>LOAD</td>
<td>Reload configuration file</td>
<td><p class="first">Any nonzero value written
to this field will force
the reloading of the
lookup table from the
configuration file defined
by</p>
<p class="last">FDIR and FNAM.</p>
</td>
</tr>
<tr class="row-even"><td>LTBL</td>
<td>Lookup Table</td>
<td>This is the location where
the conversion table is
stored in memory.</td>
</tr>
<tr class="row-odd"><td>LLNK</td>
<td><p class="first">Lookup Table</p>
<p class="last">Link</p>
</td>
<td>The link to another
record’s lookup table
(LTBL). This link only
works within an IOC.</td>
</tr>
<tr class="row-even"><td>PREC</td>
<td>Precision</td>
<td>This is the level of
precision given for
double-precision
conversion.</td>
</tr>
<tr class="row-odd"><td>VALA</td>
<td>Output value</td>
<td>The lookup table values
are put on this port. A
monitor event is sent if
the value changed.</td>
</tr>
<tr class="row-even"><td>VALB</td>
<td>Output value</td>
<td>The lookup table values
are put on this port. A
monitor event is sent if
the value changed.</td>
</tr>
<tr class="row-odd"><td>VALC</td>
<td>Output value</td>
<td>The lookup table values
are put on this port. A
monitor event is sent if
the value changed.</td>
</tr>
<tr class="row-even"><td>VALD</td>
<td>Output value</td>
<td>The lookup table values
are put on this port. A
monitor event is sent if
the value changed.</td>
</tr>
<tr class="row-odd"><td>OLDA</td>
<td>Old value</td>
<td>The old value. Used to
trigger monitors.</td>
</tr>
<tr class="row-even"><td>OLDB</td>
<td>Old value</td>
<td>The old value. Used to
trigger monitors.</td>
</tr>
<tr class="row-odd"><td>OLDC</td>
<td>Old value</td>
<td>The old value. Used to
trigger monitors.</td>
</tr>
<tr class="row-even"><td>OLDD</td>
<td>Old value</td>
<td>The old value. Used to
trigger monitors.</td>
</tr>
<tr class="row-odd"><td>OUTA</td>
<td>Output link</td>
<td>The lookup table values
are sent out these links.</td>
</tr>
<tr class="row-even"><td>OUTB</td>
<td>Output link</td>
<td>The lookup table values
are sent out these links.</td>
</tr>
<tr class="row-odd"><td>OUTC</td>
<td>Output link</td>
<td>The lookup table values
are sent out these links.</td>
</tr>
<tr class="row-even"><td>OUTD</td>
<td>Output link</td>
<td>The lookup table values
are sent out these links.</td>
</tr>
<tr class="row-odd"><td>FTVA</td>
<td>Output value type</td>
<td><p class="first">May be one of STRING,
DOUBLE, or LONG. This
field</p>
<p class="last">forces the conversion of
the appropriate table
value to the correct type.</p>
</td>
</tr>
<tr class="row-even"><td>FTVB</td>
<td>Output value type</td>
<td><p class="first">May be one of STRING,
DOUBLE, or LONG. This
field</p>
<p class="last">forces the conversion of
the appropriate table
value to the correct type.</p>
</td>
</tr>
<tr class="row-odd"><td><strong>Name</strong></td>
<td><strong>Summary</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr class="row-even"><td>FTVC</td>
<td>Output value type</td>
<td><p class="first">May be one of STRING,
DOUBLE, or LONG. This
field</p>
<p class="last">forces the conversion of
the appropriate table
value to the correct type.</p>
</td>
</tr>
<tr class="row-odd"><td>FTVD</td>
<td>Output value type</td>
<td><p class="first">May be one of STRING,
DOUBLE, or LONG. This
field</p>
<p class="last">forces the conversion of
the appropriate table
value to the correct type.</p>
</td>
</tr>
</tbody>
</table>
<blockquote id="record-support-routines-4">
<div>6.3 Record Support Routines</div></blockquote>
<hr class="docutils" />
<blockquote id="init-record-4">
<div>6.3.1 init_record</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>During the first initialization pass the ASCII configuration file is
read and stored in LTBL. Space is allocated for the VAL[A-D] and
OLD[A-D] fields. On the second pass, device support initialization is
performed.</div></blockquote>
<p><strong>6.3.2 process</strong></p>
<blockquote>
<div>See next section.</div></blockquote>
<blockquote id="special-1">
<div>6.3.3 special</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>If the LOAD field is nonzero, the existing lookup table is cleared
and a new table is read from the file described by the FDIR and FNAM
fields.</div></blockquote>
<p><strong>6.3.4 get_value</strong></p>
<blockquote>
<div>This routine fills in the values of struct valueDes so that they
refer to VAL.</div></blockquote>
<p><strong>6.3.5 get_precision</strong></p>
<blockquote>
<div>This routine returns the value of PREC.</div></blockquote>
<p><strong>6.3.6 get_enum_strs</strong></p>
<blockquote>
<div>All tags are returned by this routine.</div></blockquote>
<blockquote id="cvt-dbaddr-1">
<div>6.3.7 cvt_dbaddr</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>This routine converts the output strings into the appropriate data
type defined by FTV[A-D].</div></blockquote>
<blockquote id="record-processing-4">
<div>6.4 Record Processing</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>The processing algorithm performs the following steps:</div></blockquote>
<ol class="arabic simple">
<li><dl class="first docutils">
<dt>Checks to see the appropriate device support module exists. If it</dt>
<dd>doesn’t, an error message is issued and processing is terminated
with the PACT field set to TRUE.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>The device support write function is called. The return status value</dt>
<dd>is set from the return value of this function.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>If the device support did not complete processing, the PACT field is</dt>
<dd>left TRUE and processing terminates. It is assumed the device
support callback will reenter the processing routine and complete
at a later time.</dd>
</dl>
</li>
<li>The processing flag is set to TRUE.</li>
<li><dl class="first docutils">
<dt>Check for alarms. If the NVAL field is equal to zero, the SOFT_ALARM</dt>
<dd>is set to INVALID.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Check for monitors. If any value in the fields VAL, NVAL, VALA, VALB,</dt>
<dd>VALC, VALD has changed a monitor event is posted for that field.</dd>
</dl>
</li>
<li>Process the forward link.</li>
<li>Set PACT to FALSE and exit.</li>
</ol>
<p><strong>6.5 Device Support</strong></p>
<blockquote>
<div>The only device currently supported is Soft Channel.</div></blockquote>
<blockquote id="capfast-4">
<div>6.6 CapFast</div></blockquote>
<hr class="docutils" />
<p>There are two CapFast symbols for the lutout record: <em>elutouts.sym</em> and
<em>elutout.sym</em>. These symbol are included in the epics3.12.2Gem.4 and
later distributions. The symbols are shown in Figure 7 on page 26.</p>
<p><strong>FIGURE 7.</strong> CapFast <em>elutouts</em> and <em>elutout</em> symbols</p>
<blockquote>
<div><blockquote>
<div><p>.</p>
<p>.</p>
</div></blockquote>
<p>6.7 Future Enhancements</p>
</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>Some future enhancements the lutout record may be:</div></blockquote>
<ul class="simple">
<li>Access of LTBL across a network.</li>
<li>Support for more data types.</li>
<li>Per-item additions to the lookup table.</li>
<li>Better return of the list of tags.</li>
</ul>
</div>
<div class="section" id="lutin-lookup-table-input-record">
<h2>7.0 lutin - Lookup Table Input Record<a class="headerlink" href="#lutin-lookup-table-input-record" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The lutin record converts up to four input values into a character
string. The input values can be any of string, double-precision, or
long integer data types, determined from the FTVA, FTVB. FTVC, and
FTVD fields. The conversion type must match the value found in the
lookup table, thus if the type is a long integer, the corresponding
lookup table value must also be an integer. For integer and
double-precision values, the value is matched to within the low and
high tolerances given in the lookup table. This feature supports any
hysteresis or jitter associated with the sampled value. The low and
high tolerances can be individually adjusted to accommodate nonlinear
or preloaded systems.</p>
<p>The SELB field allows only the specified input fields to be used in
the conversion. If the selection bit mask is 1, the first
configuration that matches only the VALA field is returned. If the
mask is 3, the VALA and VALB fields are the only ones tested. For a
mask of 15, all input fields are used. The NVAL field returns the
number of fields that were successfully matched. An NVAL field of
zero will generate a SOFT alarm of INVALID.</p>
<p>The lookup table can be reread from the file by writing a one to the
LOAD field.</p>
<p>A lutin record can reference another lutout or lutin record’s lookup
table by making a connection between its LLNK field and the other
record’s LTBL field. The record can now find a tag in either its
lookup table or the table from the other record. This feature can
only work within an IOC; it will not work across channel access.
[<em>This feature is not yet implemented].</em></p>
<p>More information and examples can be found in the lutin manual[3].</p>
</div></blockquote>
<blockquote id="field-summary-4">
<div>7.1 Field Summary</div></blockquote>
<hr class="docutils" />
<p><strong>TABLE 2.</strong> Lutin Record Field Summary</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="16%" />
<col width="15%" />
<col width="15%" />
<col width="16%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Field</strong></th>
<th class="head"><strong>Type</strong></th>
<th class="head"><strong>Initial</strong></th>
<th class="head"><strong>Access</strong></th>
<th class="head"><strong>Modify</strong></th>
<th class="head"><strong>Monitor</strong></th>
<th class="head"><strong>PP</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>VAL</td>
<td>STRING</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OVAL</td>
<td>STRING</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>NVAL</td>
<td>LONG</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>ONVL</td>
<td>LONG</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>SELB</td>
<td>LONG</td>
<td>15</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>PREC</td>
<td>LONG</td>
<td>2</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>FDIR</td>
<td>STRING</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>FNAM</td>
<td>STRING</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>LTBL</td>
<td>NOACCESS</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>LLNK</td>
<td>INLINK</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>LOAD</td>
<td>LONG</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Special</td>
</tr>
<tr class="row-odd"><td>INPA</td>
<td>INLINK</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td><strong>Field</strong></td>
<td><strong>Type</strong></td>
<td><strong>Initial</strong></td>
<td><strong>Access</strong></td>
<td><strong>Modify</strong></td>
<td><strong>Monitor</strong></td>
<td><strong>PP</strong></td>
</tr>
<tr class="row-odd"><td>INPB</td>
<td>INLINK</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>INPC</td>
<td>INLINK</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>INPD</td>
<td>INLINK</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>VALA</td>
<td>NOACCESS</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>VALB</td>
<td>NOACCESS</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>VALC</td>
<td>NOACCESS</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>VALD</td>
<td>NOACCESS</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>OLDA</td>
<td>NOACCESS</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OLDB</td>
<td>NOACCESS</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>OLDC</td>
<td>NOACCESS</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OLDD</td>
<td>NOACCESS</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>FTVA</td>
<td>GBLCHOICE</td>
<td>STRING</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>FTVB</td>
<td>GBLCHOICE</td>
<td>STRING</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>FTVC</td>
<td>GBLCHOICE</td>
<td>STRING</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>FTVD</td>
<td>GBLCHOICE</td>
<td>STRING</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
</tbody>
</table>
<blockquote id="field-description-1">
<div>7.2 Field Description</div></blockquote>
<hr class="docutils" />
<p><strong>TABLE 3.</strong> Lutin Record Field Description</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="32%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Name</strong></th>
<th class="head"><strong>Summary</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>VAL</td>
<td>Result</td>
<td>The character string of the
configuration that matches the
inputs.</td>
</tr>
<tr class="row-odd"><td>OVAL</td>
<td>Old Result</td>
<td>The old VAL. Used to trigger
monitors.</td>
</tr>
<tr class="row-even"><td>NVAL</td>
<td>Result Code</td>
<td>The number of values that were
used in the match.</td>
</tr>
<tr class="row-odd"><td>ONVL</td>
<td>Old Result Code</td>
<td>The old NVAL. Used to trigger
monitors.</td>
</tr>
<tr class="row-even"><td>SELB</td>
<td>Selection Bits</td>
<td>The bit mask of the input values
to use for testing.</td>
</tr>
<tr class="row-odd"><td>PREC</td>
<td>Precision</td>
<td>The precision of double-precision
values.</td>
</tr>
<tr class="row-even"><td>FDIR</td>
<td>Init File Directory</td>
<td>The name of the directory of the
ASCII configuration file.</td>
</tr>
<tr class="row-odd"><td>FNAM</td>
<td>Init File Name</td>
<td>The name of the file of the ASCII
configuration file.</td>
</tr>
<tr class="row-even"><td>LTBL</td>
<td>Lookup Table</td>
<td>The address of the storage of the
lookup table.</td>
</tr>
<tr class="row-odd"><td>LLNK</td>
<td><p class="first">Lookup Table</p>
<p class="last">Link</p>
</td>
<td>A link to another record’s lookup
table.</td>
</tr>
<tr class="row-even"><td>LOAD</td>
<td>Reload Table</td>
<td><p class="first">Any nonzero value written to this
field will force the reloading of
the lookup table from the
configuration file defined by</p>
<p class="last">FDIR and FNAM.</p>
</td>
</tr>
<tr class="row-odd"><td>INPA</td>
<td>Input</td>
<td>The input link.</td>
</tr>
<tr class="row-even"><td>INPB</td>
<td>Input</td>
<td>The input link.</td>
</tr>
<tr class="row-odd"><td>INPC</td>
<td>Input</td>
<td>The input link.</td>
</tr>
<tr class="row-even"><td><strong>Name</strong></td>
<td><strong>Summary</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr class="row-odd"><td>INPD</td>
<td>Input</td>
<td>The input link.</td>
</tr>
<tr class="row-even"><td>VALA</td>
<td>Value of Input</td>
<td>The input value.</td>
</tr>
<tr class="row-odd"><td>VALB</td>
<td>Value of Input</td>
<td>The input value.</td>
</tr>
<tr class="row-even"><td>VALC</td>
<td>Value of Input</td>
<td>The input value.</td>
</tr>
<tr class="row-odd"><td>VALD</td>
<td>Value of Input</td>
<td>The input value.</td>
</tr>
<tr class="row-even"><td>OLDA</td>
<td><p class="first">Old Value of</p>
<p class="last">Input</p>
</td>
<td>The old value. Used to trigger
monitors.</td>
</tr>
<tr class="row-odd"><td>OLDB</td>
<td><p class="first">Old Value of</p>
<p class="last">Input</p>
</td>
<td>The old value. Used to trigger
monitors.</td>
</tr>
<tr class="row-even"><td>OLDC</td>
<td><p class="first">Old Value of</p>
<p class="last">Input</p>
</td>
<td>The old value. Used to trigger
monitors.</td>
</tr>
<tr class="row-odd"><td>OLDD</td>
<td><p class="first">Old Value of</p>
<p class="last">Input</p>
</td>
<td>The old value. Used to trigger
monitors.</td>
</tr>
<tr class="row-even"><td>FTVA</td>
<td>Type of Value</td>
<td>The data type of the input value.
May be either STRING, DOUBLE, or
LONG.</td>
</tr>
<tr class="row-odd"><td>FTVB</td>
<td>Type of Value</td>
<td>The data type of the input value.
May be either STRING, DOUBLE, or
LONG.</td>
</tr>
<tr class="row-even"><td>FTVC</td>
<td>Type of Value</td>
<td>The data type of the input value.
May be either STRING, DOUBLE, or
LONG.</td>
</tr>
<tr class="row-odd"><td>FTVD</td>
<td>Type of Value</td>
<td>The data type of the input value.
May be either STRING, DOUBLE, or
LONG.</td>
</tr>
</tbody>
</table>
<blockquote id="record-support-routines-5">
<div>7.3 Record Support Routines</div></blockquote>
<hr class="docutils" />
<blockquote id="init-record-5">
<div>7.3.1 init_record</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>During the first initialization pass the ASCII configuration file is
read and stored in LTBL. Space is allocated for the VAL[A-D] and
OLD[A-D] fields. On the second pass, device support initialization is
performed.</div></blockquote>
<p><strong>7.3.2 process</strong></p>
<blockquote>
<div>See next section.</div></blockquote>
<blockquote id="special-2">
<div>7.3.3 special</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>If the LOAD field is nonzero, the existing lookup table is cleared
and a new table is read from the file described by the FDIR and FNAM
fields.</div></blockquote>
<p><strong>7.3.4 get_value</strong></p>
<blockquote>
<div>This routine fills in the values of struct valueDes so that they
refer to VAL.</div></blockquote>
<p><strong>7.3.5 get_precision</strong></p>
<blockquote>
<div>This routine returns the value of PREC.</div></blockquote>
<p><strong>7.3.6 get_enum_strs</strong></p>
<blockquote>
<div>All tags are returned by this routine.</div></blockquote>
<blockquote id="cvt-dbaddr-2">
<div>7.3.7 cvt_dbaddr</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>This routine converts the input strings into the appropriate data
type defined by FTV[A-D].</div></blockquote>
<blockquote id="record-processing-5">
<div>7.4 Record Processing</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>The processing algorithm performs the following steps:</div></blockquote>
<ol class="arabic simple">
<li>Checks to see the appropriate device support module exists. If it
doesn’t, an error message is issued and processing is terminated with
the PACT field set to TRUE.</li>
<li>The device support read function is called. The return status value
is set from the return value of this function.</li>
<li>If the device support did not complete processing, the PACT field is
left TRUE and processing terminates. It is assumed the device support
callback will reenter the processing routine and complete at a later
time.</li>
<li>The processing flag is set to TRUE.</li>
<li>Check for alarms. If the NVAL field is equal to zero, SOFT_ALARM is
set to INVALID.</li>
<li>Check for monitors. If any value in the fields VAL, NVAL, VALA, VALB,
VALC, VALD has changed a monitor event is posted for that field.</li>
<li>Process the forward link.</li>
<li>Set PACT to FALSE and exit.</li>
</ol>
<p><strong>7.5 Device Support</strong></p>
<blockquote>
<div>The only device currently supported is Soft Channel.</div></blockquote>
<blockquote id="capfast-5">
<div>7.6 CapFast</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>There are two CapFast symbols for the lutin record: <em>elutins.sym</em> and
<em>elutin.sym</em>. These symbols are part of the epics3.12.2Gem.4 and
later distributions. The symbols are shown in Figure 8 on page 30.</div></blockquote>
<p><strong>FIGURE 8.</strong> CapFast <em>elutins</em> and <em>elutin</em> symbols<sub>.</sub></p>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="96%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td></td>
<td><table border="1" class="first last docutils">
<colgroup>
<col width="17%" />
<col width="39%" />
<col width="27%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">SELB</th>
<th class="head"><p class="first">lutin</p>
<p class="last">Soft Channel</p>
</th>
<th class="head">FLNK</th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>FLD0</td>
<td>&#160;</td>
<td>FLD2</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>FLD1</td>
<td>LUT in</td>
<td>record</td>
<td>FLD3</td>
</tr>
<tr class="row-even"><td>VALA</td>
<td>&#160;</td>
<td>&#160;</td>
<td>VAL</td>
</tr>
<tr class="row-odd"><td></td>
<td><p class="first">SCAN:Passive</p>
<p>PHAS:0</p>
<p>EVNT:0</p>
<p>PINI:NO</p>
<p>PRIO:LOW</p>
<p>PREC:2</p>
<p>DISV:1</p>
<p class="last">DISS:NO_ALARM</p>
</td>
<td><p class="first">FDIR:</p>
<p>FNAM:</p>
<p>SELB:15</p>
<p>FTVA:STRING</p>
<p>FTVB:STRING</p>
<p>FTVC:STRING</p>
<p class="last">FTVD:STRING</p>
</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>INPA</td>
<td>&#160;</td>
<td>&#160;</td>
<td>NVAL</td>
</tr>
<tr class="row-odd"><td>VALB</td>
<td>&#160;</td>
<td>&#160;</td>
<td>LTBL</td>
</tr>
<tr class="row-even"><td>INPB</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>VALC</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>INPC</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>VALD</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>INPD</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>LOAD</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>LLNK</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>SLNK</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td></td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<blockquote>
<div>.</div></blockquote>
<blockquote id="future-enhancements-1">
<div>7.7 Future Enhancements</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>Some future enhancements the lutin record may be:</div></blockquote>
<ul class="simple">
<li>Access of LTBL across a network.</li>
<li>Support for more data types.</li>
<li>Per-item additions to the lookup table.</li>
<li>Better return of the list of tags.</li>
</ul>
</div>
<div class="section" id="mosub-multiple-output-subroutine-record">
<h2>8.0 mosub - Multiple Output Subroutine Record<a class="headerlink" href="#mosub-multiple-output-subroutine-record" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The material presented here is taken from [4].</div></blockquote>
<div class="section" id="introduction-1">
<span id="id1"></span><h3>8.1 Introduction<a class="headerlink" href="#introduction-1" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>The Multiple Output Subroutine record was developed for two reasons.
Firstly, to provide a record which has more than one output field and
secondly, as a record which can handle the transfer of ‘strings’
across the database. Traditional EPICS records only have one output
value. This is very restricting when dealing with an application
which needs to transfer large amounts of data between records and
leads to unnecessarily complicated database schematics. It is also
true that with the ‘standard’ set of EPICS records, there is no way
of passing a ‘string’ between two records. For example, there are
‘stringin’ and ‘stringout’ records, but the problem is, how do you
get the string into the record in the first place? The Multiple
Output Subroutine record solves both of these problems by adding
extra functionality to the original EPICS ‘sub’ record.</div></blockquote>
<blockquote id="field-summary-5">
<div>8.2 Field Summary</div></blockquote>
<hr class="docutils" />
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Fi
eld</strong></th>
<th class="head"><strong>T
ype</strong></th>
<th class="head">**
DCT**</th>
<th class="head"><ul class="first simple">
<li></li>
</ul>
<p class="last"><em>Init
ial*</em></p>
</th>
<th class="head"><strong>Acc
ess</strong></th>
<th class="head"><strong>Mod
ify</strong></th>
<th class="head"><strong>Rec
Proc
Moni
tor</strong></th>
<th class="head"><ul class="first simple">
<li></li>
</ul>
<p class="last"><em>PP*</em></p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>VAL</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>INAM</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>SNAM</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>SADR</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>STYP</td>
<td>SHORT</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>INPA</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-even"><td>INPB</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>INPC</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-even"><td>INPD</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>INPE</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-even"><td>INPF</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>INPG</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-even"><td>INPH</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>INPI</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-even"><td>INPJ</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>INPK</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-even"><td>INPL</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>INPM</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-even"><td>OUTA</td>
<td>OU
TLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OUTB</td>
<td>OU
TLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-even"><td>OUTC</td>
<td>OU
TLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OUTD</td>
<td>OU
TLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-even"><td>OUTE</td>
<td>OU
TLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OUTF</td>
<td>OU
TLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-even"><td>OUT1</td>
<td>OU
TLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OUT2</td>
<td>OU
TLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-even"><td>OUT3</td>
<td>OU
TLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OUT4</td>
<td>OU
TLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-even"><td>OUT5</td>
<td>OU
TLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OUT6</td>
<td>OU
TLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-even"><td>EGU</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>HOPR</td>
<td>FLOAT</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>LOPR</td>
<td>FLOAT</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>HIHI</td>
<td>FLOAT</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>LOLO</td>
<td>FLOAT</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>HIGH</td>
<td>FLOAT</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Fi
eld</strong></th>
<th class="head"><strong>T
ype</strong></th>
<th class="head">**
DCT**</th>
<th class="head"><ul class="first simple">
<li></li>
</ul>
<p class="last"><em>Init
ial*</em></p>
</th>
<th class="head"><strong>Acc
ess</strong></th>
<th class="head"><strong>Mod
ify</strong></th>
<th class="head"><strong>Rec
Proc
Moni
tor</strong></th>
<th class="head"><ul class="first simple">
<li></li>
</ul>
<p class="last"><em>PP*</em></p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>LOW</td>
<td>FLOAT</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>PREC</td>
<td>SHORT</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>BRSV</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>HHSV</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>LLSV</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>HSV</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>LSV</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>HYST</td>
<td>D
OUBLE</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>ADEL</td>
<td>D
OUBLE</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>MDEL</td>
<td>D
OUBLE</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>A</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>B</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>C</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>D</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>E</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>F</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>G</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>H</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>I</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>J</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>K</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>L</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>M</td>
<td>S
TRING</td>
<td>No</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>VALA</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-even"><td>VALB</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>VALC</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-even"><td>VALD</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>VALE</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-even"><td>VALF</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>STR1</td>
<td>S
TRING</td>
<td>No</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-even"><td>STR2</td>
<td>S
TRING</td>
<td>No</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>STR3</td>
<td>S
TRING</td>
<td>No</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-even"><td>STR4</td>
<td>S
TRING</td>
<td>No</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>STR5</td>
<td>S
TRING</td>
<td>No</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-even"><td>STR6</td>
<td>S
TRING</td>
<td>No</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>LA</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>LB</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>LC</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Fi
eld</strong></th>
<th class="head"><strong>T
ype</strong></th>
<th class="head">**
DCT**</th>
<th class="head"><ul class="first simple">
<li></li>
</ul>
<p class="last"><em>Init
ial*</em></p>
</th>
<th class="head"><strong>Acc
ess</strong></th>
<th class="head"><strong>Mod
ify</strong></th>
<th class="head"><strong>Rec
Proc
Moni
tor</strong></th>
<th class="head"><ul class="first simple">
<li></li>
</ul>
<p class="last"><em>PP*</em></p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>LD</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>LE</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>LF</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>LG</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>LH</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>LI</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>LJ</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>LK</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>LL</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>LM</td>
<td>S
TRING</td>
<td>No</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>LVA</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>LVB</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>LVC</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>LVD</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>LVE</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>LVF</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>LS1</td>
<td>S
TRING</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>LS2</td>
<td>S
TRING</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>LS3</td>
<td>S
TRING</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>LS4</td>
<td>S
TRING</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>LS5</td>
<td>S
TRING</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>LS6</td>
<td>S
TRING</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>LALM</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>ALST</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>MLST</td>
<td>D
OUBLE</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="field-descriptions">
<span id="field-descriptions-4"></span><h3>8.3 Field Descriptions<a class="headerlink" href="#field-descriptions" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="42%" />
<col width="42%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Name</strong></th>
<th class="head"><strong>Summary</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>VAL</td>
<td>Value Field</td>
<td>This field is not used.</td>
</tr>
<tr class="row-odd"><td>INAM</td>
<td><p class="first">Initialisation</p>
<p class="last">Routine</p>
</td>
<td>This is the name of the
initialisation routine to
be called once, at
iocInit.</td>
</tr>
<tr class="row-even"><td>SNAM</td>
<td>Process Routine</td>
<td>This is the name of the
routine to be called when
the record processes.</td>
</tr>
<tr class="row-odd"><td>SADR</td>
<td><p class="first">Subroutine</p>
<p class="last">Address</p>
</td>
<td>Filled in by record
processing.</td>
</tr>
<tr class="row-even"><td>STYP</td>
<td><p class="first">Subroutine</p>
<p class="last">Symbol Type</p>
</td>
<td>Filled in by record
processing.</td>
</tr>
<tr class="row-odd"><td><p class="first">INPA,…,</p>
<p class="last">INPM</p>
</td>
<td><p class="first">Input Link A,…,</p>
<p class="last">Input Link M</p>
</td>
<td>The input links from
where the values of
A,…,M are fetched
during record processing.</td>
</tr>
<tr class="row-even"><td><p class="first">OUTA,…,</p>
<p class="last">OUTF</p>
</td>
<td><p class="first">Output Link A,..</p>
<p class="last">Output Link F</p>
</td>
<td>The output links on which
the DOUBLE values located
at VALA,…,VALF are
placed during record
processing.</td>
</tr>
<tr class="row-odd"><td><p class="first">OUT1,…,</p>
<p class="last">OUT6</p>
</td>
<td><p class="first">Output Link 1,..</p>
<p class="last">Output Link 6</p>
</td>
<td><p class="first">The output links on which
the STRINGS located at</p>
<p class="last">VAL1,…,VAL6 are placed
during record processing.</p>
</td>
</tr>
<tr class="row-even"><td>EGU</td>
<td><p class="first">Engineering</p>
<p class="last">Units</p>
</td>
<td>ASCII string describing
Engineering units. This
field is used by record
support to supply a units
description string when
<em>get_units</em> is called.</td>
</tr>
<tr class="row-odd"><td>HOPR</td>
<td><p class="first">High Operating</p>
<p class="last">Range</p>
</td>
<td>These fields determine
the upper and lower
display limits for
graphical displays and
the upper and lower
control limits for
control displays. The
fields are used in the
record support routines:
<em>get_graphic_double</em> and
<em>get_control_double</em>.</td>
</tr>
<tr class="row-even"><td>LOPR</td>
<td><p class="first">Low Operating</p>
<p class="last">Range</p>
</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>HIHI</td>
<td><p class="first">Hihi Alarm</p>
<p class="last">Limit</p>
</td>
<td>These fields specify the
alarm limits and
severities. Note that
they are used as range
limits for checks against
the VAL field. Since the
VAL field is not used by
this record, these fields
are redundant.</td>
</tr>
<tr class="row-even"><td>LOLO</td>
<td><p class="first">Lolo Alarm</p>
<p class="last">Limit</p>
</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>HIGH</td>
<td><p class="first">High Alarm</p>
<p class="last">Limit</p>
</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>LOW</td>
<td><p class="first">Low Alarm</p>
<p class="last">Limit</p>
</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>BRSV</td>
<td>Severity for a subroutine
return value less than 0.</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>HHSV</td>
<td>Severity for a Hihi
Alarm.</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>LLSV</td>
<td>Severity for a Lolo
Alarm.</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>HSV</td>
<td>Severity for a High
Alarm.</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>LSV</td>
<td><p class="first">Severity for a</p>
<p class="last">Low Alarm</p>
</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>Name</strong></td>
<td><strong>Summary</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr class="row-odd"><td>HYST</td>
<td><p class="first">Alarm</p>
<p class="last">Deadband</p>
</td>
<td>These parameters specify
hysteresis factors for
raising alarms and
posting logging and
monitor events for the
VAL field. As above,
since VAL is not used by
this record, these fields
are redundant.</td>
</tr>
<tr class="row-even"><td>ADEL</td>
<td><p class="first">Archive</p>
<p class="last">Deadband</p>
</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>MDEL</td>
<td><p class="first">Monitor</p>
<p class="last">Deadband</p>
</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>A,…,L</td>
<td>A,…,L</td>
<td>The input fields which
hold the DOUBLE values
fetched in across the
input links
INPA,…,INPL.</td>
</tr>
<tr class="row-odd"><td>M</td>
<td>M</td>
<td>The input field which
holds the STRING value
fetched in across the
input link INPM.</td>
</tr>
<tr class="row-even"><td><p class="first">VALA,…,</p>
<p class="last">VALF</p>
</td>
<td>VALA,…, VALF</td>
<td><p class="first">These fields can hold any
DOUBLE value that the
user desires. They can be
set from within the
subroutine called at
process time. The DOUBLES
are placed on the output
links:</p>
<p class="last">OUTA,…,OUTF when the
record processes.</p>
</td>
</tr>
<tr class="row-odd"><td><p class="first">STR1,…,</p>
<p class="last">STR6</p>
</td>
<td>STR1,…,STR6</td>
<td><p class="first">These fields can hold any
STRING value that the
user desires. They can be
set from within the
subroutine called at
process time. The STRINGS
are placed on the output
links:</p>
<p class="last">OUT1,…,OUT6 when the
record processes.</p>
</td>
</tr>
<tr class="row-even"><td>LA,…,LL</td>
<td>Last A,.., Last L</td>
<td>Previous input DOUBLE
values. These fields are
used to decide when to
trigger monitors on
A,…,L.</td>
</tr>
<tr class="row-odd"><td>LM</td>
<td>Last M</td>
<td>Previous input STRING
value. This field is used
to decide when to trigger
a monitor on M.</td>
</tr>
<tr class="row-even"><td><p class="first">LVA,…,</p>
<p class="last">LVF</p>
</td>
<td><p class="first">Last VALA,…,</p>
<p class="last">Last VALF</p>
</td>
<td>Previous output DOUBLE
values. These fields are
used to decide when to
trigger monitors on
VALA,…,VALF.</td>
</tr>
<tr class="row-odd"><td><p class="first">LS1,…,</p>
<p class="last">LS6</p>
</td>
<td><p class="first">Last STR1,…,</p>
<p class="last">Last STR6</p>
</td>
<td>Previous output STRING
values. These fields are
used to decide when to
trigger monitors on
STR1,…,STR6.</td>
</tr>
<tr class="row-even"><td>LALM</td>
<td><p class="first">Last Alarm</p>
<p>Monitor</p>
<p class="last">Trigger Value</p>
</td>
<td>These fields are used to
implement the hysteresis
factors for monitors.
Again, since VAL is not
used by this record,
these fields are
redundant.</td>
</tr>
<tr class="row-odd"><td>ALST</td>
<td><p class="first">Last Archiver Monitor</p>
<p class="last">Trigger Value</p>
</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>MLST</td>
<td><p class="first">Last Value</p>
<p>Change</p>
<p>Monitor</p>
<p class="last">Trigger Value</p>
</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<blockquote id="record-support-routines-6">
<div>8.4 Record Support Routines</div></blockquote>
<hr class="docutils" />
<blockquote id="init-record-6">
<div>8.4.1 init_record</div></blockquote>
<hr class="docutils" />
<blockquote>
<div><p>The VAL field is set equal to 0. For each constant input link to a
DOUBLE value, the corresponding field is initialised with the
constant value. For each input link that is of type PV_LINK, a
channel access link is created. The STRING input field ‘M’ is
initialised as a blank string and a channel access link is created
for INPM. For each output DOUBLE and STRING link, a channel access
link is created.</p>
<p>The user initialisation routine, whose name is specified in INAM, is
located and called. Note that the record assumes that an
initialisation routine will always be specified. The record fails if
no routine name is given.</p>
<p>The routine specified in SNAM is located and its address and type are
stored in SADR and STYP. These are used to call the routine when the
record processes.</p>
</div></blockquote>
<div class="section" id="process">
<h4>8.4.2 process<a class="headerlink" href="#process" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div>The record can be made to process by writing to any of the input
fields A-M. The process routine implements the following algorithm:</div></blockquote>
<ul class="simple">
<li>If PACT is FALSE, set PACT = TRUE and process the input links.</li>
<li>Call the routine specified in SNAM.</li>
<li>Process the output links.</li>
<li>Get the time stamp for this processing.</li>
<li>Check for alarms. Alarms are irrelevant in this record because the
VAL field is not used.</li>
<li>Post events for value changes in the input fields and the output
fields.</li>
<li>Process the record on the end of the forward link.</li>
<li>Set PACT = FALSE.</li>
</ul>
<p><strong>8.4.3 get_value</strong></p>
<blockquote>
<div>Fills in the values of the <em>valueDes</em> structure so that they refer to
VAL.</div></blockquote>
<p><strong>8.4.4 get_units</strong></p>
<blockquote>
<div>Retrieves the Engineering Units string.</div></blockquote>
<p><strong>8.4.5 get_precision</strong></p>
<blockquote>
<div>Retrieves the value of the PREC field.</div></blockquote>
</div>
<div class="section" id="get-graphic-double">
<h4>8.4.6 get_graphic_double<a class="headerlink" href="#get-graphic-double" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div>Sets the upper and lower display limits for a field. If the field is
one of A-D, LA-LD, VALA-VALF, HIHI, HIGH, LOW or LOLO, the limits are
set to HOPR and LOPR.</div></blockquote>
</div>
<div class="section" id="get-control-double">
<h4>8.4.7 get_control_double<a class="headerlink" href="#get-control-double" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div>Sets the upper and lower control limits for a field. If the field is
one of A-D, LA-LD, VAL, HIHI, HIGH, LOW or LOLO, the limits are set
to HOPR and LOPR.</div></blockquote>
</div>
<div class="section" id="get-alarm-double">
<span id="get-alarm-double-1"></span><h4>8.4.8 get_alarm_double<a class="headerlink" href="#get-alarm-double" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>Sets the following values:</p>
<p>upper_alarm_limit = HIHI upper_warning_limit = HIGH
lower_warning_limit = LOW lower_alarm_limit = LOLO</p>
</div></blockquote>
</div>
</div>
</div>
<div class="section" id="gensub-the-general-subroutine-record">
<h2>9.0 GenSub - The General Subroutine Record<a class="headerlink" href="#gensub-the-general-subroutine-record" title="Permalink to this headline">¶</a></h2>
<blockquote id="introduction-2">
<div>9.1 Introduction</div></blockquote>
<hr class="docutils" />
<blockquote>
<div><p>This record, known as ‘GenSub’, has been designed as a replacement
for the standard EPICS subroutine record. It allows the easy passage
of arrays, scalars and user defined structures between records
existing within the same database and between those which exist in
separate IOC’s. The advantage of using arrays when transferring data
between IOC’s, rather than a set of values from individual records,
is that Channel Access guarantees to write the whole array with one
<em>ca_put</em>. The atomicity of this operation insures that data at the
receiving end is consistent at any given time. This is important in
many applications. The current Channel Access limit for the amount of
data which can be transferred with a single <em>ca_put</em> is 16kB.</p>
<p>Other features of the ‘GenSub’ record include the following:</p>
</div></blockquote>
<ul class="simple">
<li>Up to 10 input fields.</li>
<li>Up to 10 output fields.</li>
<li>The types of both input and output fields are completely configurable
by the user.</li>
<li>The routine to be called at process time can be changed dynamically
after the database has been loaded. The name of the routine can
either be fetched in over a link from another record or written
directly into the SNAM field.</li>
<li>The user can configure the record to decide when events will be
posted for the output fields. This can be: Never, Always or just when
any element of an array changes value.</li>
<li>The VAL field holds the value returned from the routine called during
record processing.</li>
</ul>
<div class="section" id="field-summary-6">
<span id="id2"></span><h3>9.2 Field Summary<a class="headerlink" href="#field-summary-6" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Fi
eld</strong></th>
<th class="head"><strong>T
ype</strong></th>
<th class="head">**
DCT**</th>
<th class="head"><ul class="first simple">
<li></li>
</ul>
<p class="last"><em>Init
ial*</em></p>
</th>
<th class="head"><strong>Acc
ess</strong></th>
<th class="head"><strong>Mod
ify</strong></th>
<th class="head"><strong>Rec
Proc
Moni
tor</strong></th>
<th class="head"><ul class="first simple">
<li></li>
</ul>
<p class="last"><em>PP*</em></p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>VAL</td>
<td>LONG</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OVAL</td>
<td>LONG</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>SADR</td>
<td>LONG</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OSAD</td>
<td>LONG</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>LFLG</td>
<td>RECC
HOICE</td>
<td>Yes</td>
<td>I
gnore</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>EFLG</td>
<td>RECC
HOICE</td>
<td>Yes</td>
<td>A
lways</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>SUBL</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>INAM</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>SNAM</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>ONAM</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>STYP</td>
<td>SHORT</td>
<td>No</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>BRSV</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>PREC</td>
<td>SHORT</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>INPA</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-even"><td>INPB</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>INPC</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-even"><td>INPD</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>INPE</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-even"><td>INPF</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>INPG</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-even"><td>INPH</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>INPI</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-even"><td>INPJ</td>
<td>I
NLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>UFA</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>UFB</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>UFC</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>UFD</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>UFE</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>UFF</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>UFG</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>UFH</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>UFI</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>UFJ</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>A</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>B</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>C</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Fi
eld</strong></th>
<th class="head"><strong>T
ype</strong></th>
<th class="head">**
DCT**</th>
<th class="head"><ul class="first simple">
<li></li>
</ul>
<p class="last"><em>Init
ial*</em></p>
</th>
<th class="head"><strong>Acc
ess</strong></th>
<th class="head"><strong>Mod
ify</strong></th>
<th class="head"><strong>Rec
Proc
Moni
tor</strong></th>
<th class="head"><ul class="first simple">
<li></li>
</ul>
<p class="last"><em>PP*</em></p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>D</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>E</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>F</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>G</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>H</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>I</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>J</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>FTA</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>D
ouble</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>FTB</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>D
ouble</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>FTC</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>D
ouble</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>FTD</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>D
ouble</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>FTE</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>D
ouble</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>FTF</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>D
ouble</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>FTG</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>D
ouble</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>FTH</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>D
ouble</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>FTI</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>D
ouble</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>FTJ</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>D
ouble</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>NOA</td>
<td>ULONG</td>
<td>Yes</td>
<td>1</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>NOB</td>
<td>ULONG</td>
<td>Yes</td>
<td>1</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>NOC</td>
<td>ULONG</td>
<td>Yes</td>
<td>1</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>NOD</td>
<td>ULONG</td>
<td>Yes</td>
<td>1</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>NOE</td>
<td>ULONG</td>
<td>Yes</td>
<td>1</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>NOF</td>
<td>ULONG</td>
<td>Yes</td>
<td>1</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>NOG</td>
<td>ULONG</td>
<td>Yes</td>
<td>1</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>NOH</td>
<td>ULONG</td>
<td>Yes</td>
<td>1</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>NOI</td>
<td>ULONG</td>
<td>Yes</td>
<td>1</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>NOJ</td>
<td>ULONG</td>
<td>Yes</td>
<td>1</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OUTA</td>
<td>OU
TLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-even"><td>OUTB</td>
<td>OU
TLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OUTC</td>
<td>OU
TLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-even"><td>OUTD</td>
<td>OU
TLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OUTE</td>
<td>OU
TLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-even"><td>OUTF</td>
<td>OU
TLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OUTG</td>
<td>OU
TLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-even"><td>OUTH</td>
<td>OU
TLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OUTI</td>
<td>OU
TLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-even"><td>OUTJ</td>
<td>OU
TLINK</td>
<td>Yes</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>UFVA</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Fi
eld</strong></th>
<th class="head"><strong>T
ype</strong></th>
<th class="head">**
DCT**</th>
<th class="head"><ul class="first simple">
<li></li>
</ul>
<p class="last"><em>Init
ial*</em></p>
</th>
<th class="head"><strong>Acc
ess</strong></th>
<th class="head"><strong>Mod
ify</strong></th>
<th class="head"><strong>Rec
Proc
Moni
tor</strong></th>
<th class="head"><ul class="first simple">
<li></li>
</ul>
<p class="last"><em>PP*</em></p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>UFVB</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>UFVC</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>UFVD</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>UFVE</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>UFVF</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>UFVG</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>UFVH</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>UFVI</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>UFVJ</td>
<td>S
TRING</td>
<td>Yes</td>
<td>Null</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>VALA</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>Yes</td>
<td>Y
es/No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>VALB</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>Yes</td>
<td>Y
es/No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>VALC</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>Yes</td>
<td>Y
es/No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>VALD</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>Yes</td>
<td>Y
es/No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>VALE</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>Yes</td>
<td>Y
es/No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>VALF</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>Yes</td>
<td>Y
es/No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>VALG</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>Yes</td>
<td>Y
es/No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>VALH</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>Yes</td>
<td>Y
es/No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>VALI</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>VALJ</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OVLA</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>OVLB</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OVLC</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>OVLD</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OVLE</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>OVLF</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OVLG</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>OVLH</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>OVLI</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>OVLJ</td>
<td>NOA
CCESS</td>
<td>No</td>
<td>0</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>FTVA</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>D
ouble</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>FTVB</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>D
ouble</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>FTVC</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>D
ouble</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>FTVD</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>D
ouble</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>FTVE</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>D
ouble</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>FTVF</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>D
ouble</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>FTVG</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>D
ouble</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>FTVH</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>D
ouble</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>FTVI</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>D
ouble</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Fi
eld</strong></th>
<th class="head"><strong>T
ype</strong></th>
<th class="head">**
DCT**</th>
<th class="head"><ul class="first simple">
<li></li>
</ul>
<p class="last"><em>Init
ial*</em></p>
</th>
<th class="head"><strong>Acc
ess</strong></th>
<th class="head"><strong>Mod
ify</strong></th>
<th class="head"><strong>Rec
Proc
Moni
tor</strong></th>
<th class="head"><ul class="first simple">
<li></li>
</ul>
<p class="last"><em>PP*</em></p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>FTVJ</td>
<td>GBLC
HOICE</td>
<td>Yes</td>
<td>D
ouble</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>NOVA</td>
<td>ULONG</td>
<td>Yes</td>
<td>1</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>NOVB</td>
<td>ULONG</td>
<td>Yes</td>
<td>1</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>NOVC</td>
<td>ULONG</td>
<td>Yes</td>
<td>1</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>NOVD</td>
<td>ULONG</td>
<td>Yes</td>
<td>1</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>NOVE</td>
<td>ULONG</td>
<td>Yes</td>
<td>1</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>NOVF</td>
<td>ULONG</td>
<td>Yes</td>
<td>1</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>NOVG</td>
<td>ULONG</td>
<td>Yes</td>
<td>1</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>NOVH</td>
<td>ULONG</td>
<td>Yes</td>
<td>1</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>NOVI</td>
<td>ULONG</td>
<td>Yes</td>
<td>1</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>NOVJ</td>
<td>ULONG</td>
<td>Yes</td>
<td>1</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>TOVA</td>
<td>ULONG</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>TOVB</td>
<td>ULONG</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>TOVC</td>
<td>ULONG</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>TOVD</td>
<td>ULONG</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>TOVE</td>
<td>ULONG</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>TOVF</td>
<td>ULONG</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>TOVG</td>
<td>ULONG</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>TOVH</td>
<td>ULONG</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>TOVI</td>
<td>ULONG</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>TOVJ</td>
<td>ULONG</td>
<td>Yes</td>
<td>0</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="field-descriptions-5">
<span id="id3"></span><h3>9.3 Field Descriptions<a class="headerlink" href="#field-descriptions-5" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="42%" />
<col width="42%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Name</strong></th>
<th class="head"><strong>Summary</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>VAL</td>
<td>Value returned from
process routine</td>
<td>This field holds the
value returned from the
user defined process
routine.</td>
</tr>
<tr class="row-odd"><td>OVAL</td>
<td>Old VAL</td>
<td>Previous VAL, used to
decide when to post
events.</td>
</tr>
<tr class="row-even"><td>SADR</td>
<td><p class="first">Subroutine</p>
<p class="last">Address</p>
</td>
<td>The address of the
routine called at process
time.</td>
</tr>
<tr class="row-odd"><td>OSAD</td>
<td>Old SADR</td>
<td>Previous SADR, used to
decide when to post
events.</td>
</tr>
<tr class="row-even"><td>LFLG</td>
<td>Link Flag</td>
<td><p class="first">Tells the record whether
to read or ignore the
SUBL link. If the value
is READ, then the name of
the subroutine to be
called at process time is
read from SUBL. If the
value is IGNORE, the name
of the subroutine is that
currently held in</p>
<p class="last">SNAM.</p>
</td>
</tr>
<tr class="row-odd"><td>EFLG</td>
<td>Event Flag</td>
<td><p class="first">Tells the record when to
post events on the output
fields VALA,…,VALJ. If
the value is NEVER,
events are never posted.
If the value is ALWAYS,
events are posted
everytime the record
processes. If the value
is ON CHANGE, events are
posted when any element
of an array changes
value.</p>
<p class="last">Archiving and Value
Change events are posted
in each case.</p>
</td>
</tr>
<tr class="row-even"><td>SUBL</td>
<td>Subroutine Link</td>
<td>Where to get the
subroutine name from.</td>
</tr>
<tr class="row-odd"><td>INAM</td>
<td><p class="first">Initialisation</p>
<p class="last">Routine</p>
</td>
<td>This is the name of the
initialisation routine to
be called once, at
iocInit.</td>
</tr>
<tr class="row-even"><td>SNAM</td>
<td>Process Routine</td>
<td>This is the name of the
routine to be called when
the record processes.
Note, this can be
overwritten by the SUBL
link, if LFLG is set to
READ.</td>
</tr>
<tr class="row-odd"><td>ONAM</td>
<td>Process Routine</td>
<td>Old process subroutine
name.</td>
</tr>
<tr class="row-even"><td>STYP</td>
<td><p class="first">Subroutine</p>
<p class="last">Symbol Type</p>
</td>
<td>Filled in by record
processing.</td>
</tr>
<tr class="row-odd"><td>BRSV</td>
<td>Severity for a subroutine
return value less than 0.</td>
<td>Specifies the Alarm
severity.</td>
</tr>
<tr class="row-even"><td>PREC</td>
<td><p class="first">Display</p>
<p class="last">Precision</p>
</td>
<td>Specifies the number of
decimal places with which
to display the values of
the fields VALA,…,VALJ.</td>
</tr>
<tr class="row-odd"><td><p class="first">INPA,…,</p>
<p class="last">INPJ</p>
</td>
<td><p class="first">Input Link A,…,</p>
<p class="last">Input Link J</p>
</td>
<td>The input links from
where the values of
A,…,J are fetched
during record processing.</td>
</tr>
<tr class="row-even"><td><p class="first">UFA,…,</p>
<p class="last">UFJ</p>
</td>
<td><p class="first">User Function A</p>
<p class="last">User Function J</p>
</td>
<td>These are the names of
functions which return
the sizes of any user
defined structures to be
received in the input
fields A,…,J.</td>
</tr>
<tr class="row-odd"><td>A,…,J</td>
<td>Input Fields</td>
<td>The input fields which
hold the scalar values or
arrays fetched in across
the input links
INPA,…,INPJ.</td>
</tr>
<tr class="row-even"><td><p class="first">FTA,…,</p>
<p class="last">FTJ</p>
</td>
<td><p class="first">Field Type of A</p>
<p class="last">Field Type of J</p>
</td>
<td>Field types of the input
values. These can be
CHAR, STRING, DOUBLE,
LONG, etc.</td>
</tr>
<tr class="row-odd"><td><strong>Name</strong></td>
<td><strong>Summary</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr class="row-even"><td><p class="first">NOA…,</p>
<p class="last">NOJ</p>
</td>
<td><p class="first">Number of</p>
<p>elements in A,..</p>
<p class="last">Number of elements in J</p>
</td>
<td>The number of elements in
each input field. Default
is 1 (scalar value). An
array is specified by
setting this field to
greater than 1.</td>
</tr>
<tr class="row-odd"><td><p class="first">OUTA,…,</p>
<p class="last">OUTJ</p>
</td>
<td><p class="first">Output Link A,..</p>
<p class="last">Output Link J</p>
</td>
<td>The output links on which
the scalars or arrays
located at VALA,…,VALJ
are placed during record
processing.</td>
</tr>
<tr class="row-even"><td><p class="first">UFVA,…,</p>
<p class="last">UFVJ</p>
</td>
<td><p class="first">User Function VALA,…,</p>
<p>User Function</p>
<p class="last">VALJ</p>
</td>
<td>These are the names of
functions which return
the sizes of any user
defined structures which
are to passed out of the
record from the fields
VALA,…,VALJ.</td>
</tr>
<tr class="row-odd"><td><p class="first">VALA,..,</p>
<p class="last">VALJ</p>
</td>
<td>Output Fields</td>
<td>The output fields which
hold the scalar values or
arrays pushed out across
the output links
OUTA,…,OUTJ.</td>
</tr>
<tr class="row-even"><td><p class="first">FTVA,…,</p>
<p class="last">FTVJ</p>
</td>
<td><p class="first">Field Type of</p>
<p>VALA</p>
<p>Field Type of</p>
<p class="last">VALJ</p>
</td>
<td>Field types of the output
values. These can be
CHAR, STRING, DOUBLE,
LONG, etc.</td>
</tr>
<tr class="row-odd"><td><p class="first">OVLA,..,</p>
<p class="last">OVLJ</p>
</td>
<td><p class="first">Previous</p>
<p class="last">Outputs</p>
</td>
<td>The previous values of
the outputs. These are
used to decide when to
post events if EFLG is
set to ON CHANGE.</td>
</tr>
<tr class="row-even"><td><p class="first">NOVA,…,</p>
<p class="last">NOVJ</p>
</td>
<td><p class="first">Number of elements in</p>
<p>VALA</p>
<p>Number of elements in</p>
<p class="last">VALJ</p>
</td>
<td>The number of elements in
each output field.
Default is 1 (scalar
value). An array is
specified by setting this
field to greater than 1.</td>
</tr>
<tr class="row-odd"><td><p class="first">TOVA,…,</p>
<p class="last">TOVJ</p>
</td>
<td><p class="first">Total Number of bytes in
VALA</p>
<p class="last">Total Number of bytes in
VALJ</p>
</td>
<td>The total number of bytes
in each output field.
These are used internally
by record processing and
do not concern the user.</td>
</tr>
</tbody>
</table>
<blockquote id="record-support-routines-7">
<div>9.4 Record Support Routines</div></blockquote>
<hr class="docutils" />
<blockquote id="init-record-7">
<div>9.4.1 init_record</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>This routine is called twice at <em>iocInit</em>. On the first call it does
the following:</div></blockquote>
<ul class="simple">
<li>Look for any user functions defined in the fields UFA-UFJ and
UFVA-UFVJ. If they have been defined, call them to get the size of
the structure which is to passed across the link. If they are not
defined, no routine is called.</li>
<li>Calloc sufficient space to hold the number of input scalars and/or
arrays defined by the settings of the fields FTA-FTJ and NOA-NOJ. If
a user function has been defined, calloc the space required by the
multiple of the number of elements and size returned from the user
function.</li>
<li>Calloc sufficient space to hold the number of output scalars and/or
arrays defined by the settings of the fields FTVA-FTVJ and NOVA-NOVJ.
If a user function has been defined, calloc the space required by the
multiple of the number of elements and size returned from the user
function. For the output fields, also calloc space to hold the
previous value of a field. This is required when the decision is made
on whether or not to post events.</li>
</ul>
<blockquote>
<div>On the second call, it does the following:</div></blockquote>
<ul class="simple">
<li>Create the SUBL link.</li>
<li>Create each input link.</li>
<li>Create each output link.</li>
<li>If the field INAM is set, look-up the address of the routine and call
it.</li>
<li>If the field LFLG is set to IGNORE and SNAM is defined, look-up the
address of the process routine.</li>
</ul>
<div class="section" id="process-1">
<span id="id4"></span><h4>9.4.2 process<a class="headerlink" href="#process-1" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div>This routine implements the following algorithm:</div></blockquote>
<ul class="simple">
<li>Set PACT to TRUE.</li>
<li>If the field LFLG is set to READ, get the subroutine name from the
SUBL link. If the name is not NULL and it is not the same as the
previous subroutine name, lookup the subroutine address. Set the old
subroutine name, ONAM, equal to the current name, SNAM.</li>
<li>Fetch the values from the input links.</li>
<li>Call the routine specified by SNAM.</li>
<li>Set VAL equal to the return value from the routine specified by SNAM.</li>
<li>Place the output values on the output links.</li>
<li>Get the time of processing and put it into the timestamp field.</li>
<li>If the subroutine address has changed, post a change-of-value event
and a log event for the SADR field. If VAL has changed, post a
change-of value and log event for this field. If EFLG is set to
ALWAYS, post change-of-value and log events for every output field.
If EFLG is set to ON CHANGE, post change-of-value and log events for
every output field which has changed. In the case of an array, an
event will be posted if any single element of the array has changed.
If EFLG is set to NEVER, no change-of-value or log events are posted
for the output fields.</li>
<li>Process the record on the end of the forward link, if one exists.</li>
<li>Set PACT to FALSE.</li>
</ul>
<p><strong>9.4.3 get_value</strong></p>
<blockquote>
<div>Fills in the values of struct <em>valueDes</em> so that they refer to VAL.</div></blockquote>
</div>
<div class="section" id="get-precision">
<h4>9.4.4 get_precision<a class="headerlink" href="#get-precision" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div>Sets the display precision to the value of PREC for any of the output
fields VALA,…, VALJ. This routine could be called for any of these
fields.</div></blockquote>
<blockquote id="cvt-dbaddr-3">
<div>9.4.5 cvt_dbaddr</div></blockquote>
<hr class="docutils" />
<blockquote>
<div><blockquote>
<div>The purpose of this routine is to fill in the struct <em>dbAddr</em> for the
field of the record for which it has been called. Typically, the
number of elements in the field, the field type and the size of the
field will be set in this routine. For arrays, this record support
routine is essential.</div></blockquote>
<p>9.4.6 get_array_info</p>
</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>This routine returns the current number of elements and the offset of
the first value for an array. For this record, the offset field is
always 0.</div></blockquote>
<p><strong>9.4.7 put_array_info</strong></p>
<blockquote>
<div>This routine is called after new values have been placed in an array.</div></blockquote>
<blockquote id="special-3">
<div>9.4.8 special</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>This routine is called whenever the SNAM field changes. It is called
twice, once before the change and once after. On the first call, the
routine simply returns. On the second call, after SNAM has changed,
it implements the following algorithm:</div></blockquote>
<ul class="simple">
<li>If LFLG is set to IGNORE and SNAM is not NULL, then look-up the
address of the routine specified by SNAM. Set the SADR field equal to
the subroutine address.</li>
<li>Post change-of-value and log events for the SADR field, if this has
changed.</li>
</ul>
<blockquote>
<div>9.5 Use of the ‘GenSub’ Record</div></blockquote>
<hr class="docutils" />
<blockquote>
<div><blockquote>
<div><p>Two ‘GenSub’ records can be used to transfer data between one
another. These records can be located in the same IOC or in separate
IOC’s. The data can be a scalar of any type, an array, a user defined
structure or an array of user defined structures.</p>
<p>Let us name the ‘GenSub’ record which is sending data, record A, and
the ‘GenSub’ record which is receiving the data, record B. There are
some fields which must be set-up correctly in each record before the
data transfer can occur without error. The output field types and the
number of elements in the output fields of record A must match the
input field types and number of elements in the input fields of
record B. Thus, combining the two records is rather like a jigsaw.
Let us take an example.</p>
<p>If 5 doubles are to be passed from the VALA field of record A to the
A field of record B, then the following settings are necessary:</p>
<p>Record A should have: FTVA = DOUBLE, NOVA = 5.</p>
<p>Record B should have: FTA = DOUBLE, NOA = 5.</p>
</div></blockquote>
<p>9.6 Use of User Defined Structures</p>
</div></blockquote>
<hr class="docutils" />
<blockquote>
<div><blockquote>
<div><p>It is possible for the user to define a structure which is to be
passed between two ‘GenSub’ records. As an example, let us imagine
that the following structure needs to be transferred between the VALB
field of record A and the B field of record B:</p>
<p><em>struct pinfo {</em></p>
<p><em>int age;</em></p>
<p><em>char name[128];</em></p>
<p><em>char posn[128]; double salary; };</em></p>
<p>The user must supply a function which will return the size of this
structure. An example, and template for such a function is given
below:</p>
<p><em>#include &lt;vxWorks.h&gt;</em></p>
<p><em>#include &lt;types.h&gt;</em></p>
<p><em>#include &lt;time.h&gt;</em></p>
<p><em>#include &lt;stdlib.h&gt;</em></p>
<p><em>#include &lt;stdioLib.h&gt;</em></p>
<p><em>#include &lt;dbEvent.h&gt;</em></p>
<p><em>#include &lt;dbDefs.h&gt;</em></p>
<p><em>#include &lt;dbCommon.h&gt;</em></p>
<p><em>#include &lt;recSup.h&gt;</em></p>
<p><em>#include &lt;GenSubRecord.h&gt; #include &lt;pinfo.h&gt;</em></p>
<p><em>long setup( struct GenSubRecord *pgsub )</em></p>
<p><em>{</em></p>
<p><em>return( sizeof(struct pinfo) ); }</em></p>
<p>The user should set the following fields:</p>
<p>Record A: UFVB:setup</p>
<p>FTVB:CHAR</p>
<p>NOVB: 1</p>
<p>Record B: UFB: setup</p>
<p>FTB: CHAR NOB: 1</p>
<p>These settings indicate that a single structure, of the size of what
is returned from <em>setup,</em> will be passed from VALB of record A to B
of record B. Inside the process routine called from record B, the
user should cast the B field as a pointer to the structure, thus:</p>
<p>s<em>truct pinfo *ex; ex = (struct pinfo *)pgsub-&gt;b;</em></p>
<p>The elements of the structure then become available to the routine.
Note that the user is responsible for ensuring that the two ‘GenSub’
records, which may be in separate IOC’s, share identical layouts of
the structure.</p>
<p>It is also worth pointing out here, that because we are packing the
structure into a stream of characters, character arrays within the
structure are not limited to the 40 character limit imposed on
strings for normal record fields. In this example, we have used
character arrays dimensioned to 128.</p>
<p>The total size of the structure must be less than 16kB. Internal
‘GenSub’ record code checks for this.</p>
</div></blockquote>
<p>9.7 Dynamically Changing the User Routine called during Record Processing</p>
</div></blockquote>
<hr class="docutils" />
<blockquote>
<div>The ‘GenSub’ record allows the user to dynamically change which
routine is called when the record processes. This can be done in two
ways:</div></blockquote>
<ul class="simple">
<li>The LFLG field can be set to READ so that the name of the routine is
read from the SUBL link. Thus, whatever is feeding this link can
change the name of the routine before the ‘GenSub’ record is
processed. In this case, the record looks in the symbol table for the
symbol name whenever the name of routine fetched from the link
changes.</li>
<li>The LFLG field can be set to IGNORE. In this case, the rotine called
during record processing is that specified in the SNAM property
field. Under these conditions, the SNAM field can be changed by a
Channel Access write to the SNAM field. Thus, during development
work, when it is often required to run a modified version of the
routine, it will no longer be a requirement to reboot the IOC and
reload the database. A new routine will be called during record
processing if the routine is loaded with the vxWorks <em>ld</em> command,
and <em>cau</em> is used to put the name of the routine into the record’s
SNAM field. After the SNAM field has been changed, the record
automatically looks up the symbol name in the symbol table. Note
that, if the same routine name is used, this is not a problem. The
record finds the latest version of the code which has been loaded.
Obviously, one needs to take care of the amount of memory which is
used, if no <em>unld</em> command is ever used.</li>
</ul>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Gemini Controls

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>